import{a as dt}from"../chunks/js.cookie.edb2da2a.js";import{b as nt}from"../chunks/paths.cbaa310c.js";import{E as mt}from"../chunks/ExamDto.2ccd907e.js";import{s as gt,f as r,a as T,g as n,h as g,L as Z,c as E,d as m,j as W,i as ht,x as s,y as ct,C as _t,M as vt,l as M,m as L,n as K,z as kt}from"../chunks/scheduler.21bd8612.js";import{e as rt}from"../chunks/each.ec07e198.js";import{S as Dt,i as yt}from"../chunks/index.2510bc2d.js";import{i as Rt}from"../chunks/navigation.53551334.js";import{t as st}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.79e974c9.js";import{E as it}from"../chunks/examtypes.71cfa446.js";import{E as pt}from"../chunks/ErrorResponseDto.3330ec0e.js";const St=async({fetch:a})=>{const e=dt.get("oktato-token");let d=[],u=[];try{const _=await(await a(nt+"/api/exams?teachedByMe=true",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();d=await mt.parseAsync(_)}catch(p){console.error("Teacher statistics failed!",p)}try{const _=await(await a(nt+"/api/exams",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();u=(await mt.parseAsync(_)).filter(h=>!d.some(D=>D.courseCode===h.courseCode&&D.courseSemester===h.courseSemester&&D.start===h.start))}catch(p){console.error("Teacher statistics failed!",p)}return{taughtExams:d,exams:u}},Ft=Object.freeze(Object.defineProperty({__proto__:null,load:St},Symbol.toStringTag,{value:"Module"}));function bt(a,e,d){const u=a.slice();return u[7]=e[d],u}function Tt(a,e,d){const u=a.slice();return u[7]=e[d],u}function Et(a){let e,d,u=a[7].courseCode+"",p,_,h,D=a[7].courseSemester+"",N,j,o,z=a[7].start+"",y,O,R,v=a[7].end+"",C,G,B,k=it(a[7].examType)+"",Y,P,w,H=a[7].classRoomAddress+"",$,V,q=a[7].classRoomNumber+"",J,I,x,S,X="Lead",f,A,b;function l(){return a[4](a[7])}return{c(){e=r("tr"),d=r("td"),p=M(u),_=T(),h=r("td"),N=M(D),j=T(),o=r("td"),y=M(z),O=T(),R=r("td"),C=M(v),G=T(),B=r("td"),Y=M(k),P=T(),w=r("td"),$=M(H),V=M(", "),J=M(q),I=T(),x=r("td"),S=r("button"),S.textContent=X,f=T(),this.h()},l(c){e=n(c,"TR",{});var t=g(e);d=n(t,"TD",{});var F=g(d);p=L(F,u),F.forEach(m),_=E(t),h=n(t,"TD",{});var tt=g(h);N=L(tt,D),tt.forEach(m),j=E(t),o=n(t,"TD",{});var U=g(o);y=L(U,z),U.forEach(m),O=E(t),R=n(t,"TD",{});var i=g(R);C=L(i,v),i.forEach(m),G=E(t),B=n(t,"TD",{});var Q=g(B);Y=L(Q,k),Q.forEach(m),P=E(t),w=n(t,"TD",{});var et=g(w);$=L(et,H),V=L(et,", "),J=L(et,q),et.forEach(m),I=E(t),x=n(t,"TD",{class:!0});var at=g(x);S=n(at,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(S)!=="svelte-1eq5t16"&&(S.textContent=X),at.forEach(m),f=E(t),t.forEach(m),this.h()},h(){W(S,"class","btn-small btn-danger"),W(x,"class","table-commands")},m(c,t){ht(c,e,t),s(e,d),s(d,p),s(e,_),s(e,h),s(h,N),s(e,j),s(e,o),s(o,y),s(e,O),s(e,R),s(R,C),s(e,G),s(e,B),s(B,Y),s(e,P),s(e,w),s(w,$),s(w,V),s(w,J),s(e,I),s(e,x),s(x,S),s(e,f),A||(b=ct(S,"click",l),A=!0)},p(c,t){a=c,t&1&&u!==(u=a[7].courseCode+"")&&K(p,u),t&1&&D!==(D=a[7].courseSemester+"")&&K(N,D),t&1&&z!==(z=a[7].start+"")&&K(y,z),t&1&&v!==(v=a[7].end+"")&&K(C,v),t&1&&k!==(k=it(a[7].examType)+"")&&K(Y,k),t&1&&H!==(H=a[7].classRoomAddress+"")&&K($,H),t&1&&q!==(q=a[7].classRoomNumber+"")&&K(J,q)},d(c){c&&m(e),A=!1,b()}}}function Ct(a){let e,d,u=a[7].courseCode+"",p,_,h,D=a[7].courseSemester+"",N,j,o,z=a[7].start+"",y,O,R,v=a[7].end+"",C,G,B,k=it(a[7].examType)+"",Y,P,w,H=a[7].classRoomAddress+"",$,V,q=a[7].classRoomNumber+"",J,I,x,S,X="Oktat",f,A,b="Töröl",l,c,t;function F(){return a[5](a[7])}function tt(){return a[6](a[7])}return{c(){e=r("tr"),d=r("td"),p=M(u),_=T(),h=r("td"),N=M(D),j=T(),o=r("td"),y=M(z),O=T(),R=r("td"),C=M(v),G=T(),B=r("td"),Y=M(k),P=T(),w=r("td"),$=M(H),V=M(", "),J=M(q),I=T(),x=r("td"),S=r("button"),S.textContent=X,f=T(),A=r("button"),A.textContent=b,l=T(),this.h()},l(U){e=n(U,"TR",{});var i=g(e);d=n(i,"TD",{});var Q=g(d);p=L(Q,u),Q.forEach(m),_=E(i),h=n(i,"TD",{});var et=g(h);N=L(et,D),et.forEach(m),j=E(i),o=n(i,"TD",{});var at=g(o);y=L(at,z),at.forEach(m),O=E(i),R=n(i,"TD",{});var ut=g(R);C=L(ut,v),ut.forEach(m),G=E(i),B=n(i,"TD",{});var ft=g(B);Y=L(ft,k),ft.forEach(m),P=E(i),w=n(i,"TD",{});var lt=g(w);$=L(lt,H),V=L(lt,", "),J=L(lt,q),lt.forEach(m),I=E(i),x=n(i,"TD",{class:!0});var ot=g(x);S=n(ot,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(S)!=="svelte-eaq5y6"&&(S.textContent=X),f=E(ot),A=n(ot,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(A)!=="svelte-12h6nv5"&&(A.textContent=b),ot.forEach(m),l=E(i),i.forEach(m),this.h()},h(){W(S,"class","btn-small"),W(A,"class","btn-small btn-danger"),W(x,"class","table-commands")},m(U,i){ht(U,e,i),s(e,d),s(d,p),s(e,_),s(e,h),s(h,N),s(e,j),s(e,o),s(o,y),s(e,O),s(e,R),s(R,C),s(e,G),s(e,B),s(B,Y),s(e,P),s(e,w),s(w,$),s(w,V),s(w,J),s(e,I),s(e,x),s(x,S),s(x,f),s(x,A),s(e,l),c||(t=[ct(S,"click",F),ct(A,"click",tt)],c=!0)},p(U,i){a=U,i&1&&u!==(u=a[7].courseCode+"")&&K(p,u),i&1&&D!==(D=a[7].courseSemester+"")&&K(N,D),i&1&&z!==(z=a[7].start+"")&&K(y,z),i&1&&v!==(v=a[7].end+"")&&K(C,v),i&1&&k!==(k=it(a[7].examType)+"")&&K(Y,k),i&1&&H!==(H=a[7].classRoomAddress+"")&&K($,H),i&1&&q!==(q=a[7].classRoomNumber+"")&&K(J,q)},d(U){U&&m(e),c=!1,kt(t)}}}function zt(a){let e,d,u="Vizsgák",p,_,h,D="Frissítés",N,j,o="Új vizsga",z,y,O="Általam tartott vizsgák",R,v,C,G="<tr><th>Kód</th> <th>Szemeszter</th> <th>Kezdet</th> <th>Vége</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",B,k,Y,P,w="További vizsgák",H,$,V,q="<tr><th>Kód</th> <th>Szemeszter</th> <th>Kezdet</th> <th>Vég</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",J,I,x,S,X=rt(a[0].taughtExams),f=[];for(let l=0;l<X.length;l+=1)f[l]=Et(Tt(a,X,l));let A=rt(a[0].exams),b=[];for(let l=0;l<A.length;l+=1)b[l]=Ct(bt(a,A,l));return{c(){e=r("div"),d=r("h4"),d.textContent=u,p=T(),_=r("div"),h=r("button"),h.textContent=D,N=T(),j=r("a"),j.textContent=o,z=T(),y=r("h5"),y.textContent=O,R=T(),v=r("table"),C=r("thead"),C.innerHTML=G,B=T(),k=r("tbody");for(let l=0;l<f.length;l+=1)f[l].c();Y=T(),P=r("h5"),P.textContent=w,H=T(),$=r("table"),V=r("thead"),V.innerHTML=q,J=T(),I=r("tbody");for(let l=0;l<b.length;l+=1)b[l].c();this.h()},l(l){e=n(l,"DIV",{class:!0});var c=g(e);d=n(c,"H4",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-9hyc3"&&(d.textContent=u),p=E(c),_=n(c,"DIV",{class:!0});var t=g(_);h=n(t,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(h)!=="svelte-cxj7cd"&&(h.textContent=D),N=E(t),j=n(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),Z(j)!=="svelte-1q39u3b"&&(j.textContent=o),t.forEach(m),z=E(c),y=n(c,"H5",{"data-svelte-h":!0}),Z(y)!=="svelte-dwh261"&&(y.textContent=O),R=E(c),v=n(c,"TABLE",{class:!0});var F=g(v);C=n(F,"THEAD",{"data-svelte-h":!0}),Z(C)!=="svelte-r9mz7e"&&(C.innerHTML=G),B=E(F),k=n(F,"TBODY",{});var tt=g(k);for(let Q=0;Q<f.length;Q+=1)f[Q].l(tt);tt.forEach(m),F.forEach(m),Y=E(c),P=n(c,"H5",{"data-svelte-h":!0}),Z(P)!=="svelte-fyk0wa"&&(P.textContent=w),H=E(c),$=n(c,"TABLE",{class:!0});var U=g($);V=n(U,"THEAD",{"data-svelte-h":!0}),Z(V)!=="svelte-5twfbr"&&(V.innerHTML=q),J=E(U),I=n(U,"TBODY",{});var i=g(I);for(let Q=0;Q<b.length;Q+=1)b[Q].l(i);i.forEach(m),U.forEach(m),c.forEach(m),this.h()},h(){W(d,"class","svelte-en0jke"),W(h,"class","btn-small btn-primary"),W(j,"href","uj-vizsga"),W(j,"class","paper-btn btn-small btn-secondary"),W(_,"class","toolbar"),W(v,"class","table-hover"),W($,"class","table-hover"),W(e,"class","container")},m(l,c){ht(l,e,c),s(e,d),s(e,p),s(e,_),s(_,h),s(_,N),s(_,j),s(e,z),s(e,y),s(e,R),s(e,v),s(v,C),s(v,B),s(v,k);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(k,null);s(e,Y),s(e,P),s(e,H),s(e,$),s($,V),s($,J),s($,I);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(I,null);x||(S=ct(h,"click",a[1]),x=!0)},p(l,[c]){if(c&5){X=rt(l[0].taughtExams);let t;for(t=0;t<X.length;t+=1){const F=Tt(l,X,t);f[t]?f[t].p(F,c):(f[t]=Et(F),f[t].c(),f[t].m(k,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=X.length}if(c&13){A=rt(l[0].exams);let t;for(t=0;t<A.length;t+=1){const F=bt(l,A,t);b[t]?b[t].p(F,c):(b[t]=Ct(F),b[t].c(),b[t].m(I,null))}for(;t<b.length;t+=1)b[t].d(1);b.length=A.length}},i:_t,o:_t,d(l){l&&m(e),vt(f,l),vt(b,l),x=!1,S()}}}function xt(a,e,d){let{data:u}=e;const p=()=>Rt(),_=async(o,z,y,O)=>{const R=dt.get("oktato-token"),v=O==="subscribe"?"POST":"DELETE",C=O==="subscribe"?"feliratkozás":"leiratkozás",G=await fetch(`${nt}/api/exams-teach?code=${o}&semester=${z}&start=${encodeURIComponent(y)}`,{method:v,headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}});if(G.status===204)p(),st.push(`Sikeresen ${C} müvelet!`);else{const B=await G.json(),k=await pt.safeParseAsync(B);k.success?st.push(k.data.errorMessage):st.push(`Sikertelen ${C} müvelet!`)}},h=async(o,z,y)=>{const O=dt.get("oktato-token"),R=await fetch(`${nt}/api/exams?code=${o}&semester=${z}&start=${encodeURIComponent(y)}`,{method:"DELETE",headers:{Authorization:`Bearer ${O}`,"Content-Type":"application/json"}});if(R.status===204)p(),st.push("Sikeresen törlés müvelet!");else{const v=await R.json(),C=await pt.safeParseAsync(v);C.success?st.push(C.data.errorMessage):st.push("Sikertelen törlés müvelet!")}},D=o=>_(o.courseCode,o.courseSemester,o.start,"unsubscribe"),N=o=>_(o.courseCode,o.courseSemester,o.start,"subscribe"),j=o=>h(o.courseCode,o.courseSemester,o.start);return a.$$set=o=>{"data"in o&&d(0,u=o.data)},[u,p,_,h,D,N,j]}class Ut extends Dt{constructor(e){super(),yt(this,e,xt,zt,gt,{data:0})}}export{Ut as component,Ft as universal};
