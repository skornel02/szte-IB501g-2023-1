import{a as ut}from"../chunks/js.cookie.edb2da2a.js";import{b as dt}from"../chunks/paths.5e87fca0.js";import{E as mt}from"../chunks/ExamDto.2ccd907e.js";import{s as kt,f as n,a as b,g as c,h as g,L as Z,c as T,d as _,j as Y,i as ft,x as t,y as ct,C as _t,M as vt,l as L,m as H,n as J,z as gt}from"../chunks/scheduler.2c2a7c16.js";import{e as it}from"../chunks/each.66c50b25.js";import{S as Dt,i as zt}from"../chunks/index.cec4e112.js";import{i as yt,g as Rt}from"../chunks/navigation.63f2fb0e.js";import{t as at}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.e45ffa17.js";import{E as ht}from"../chunks/examtypes.71cfa446.js";import{E as pt}from"../chunks/ErrorResponseDto.3330ec0e.js";const St=async({fetch:s})=>{const e=ut.get("oktato-token");let i=[],u=[];try{const v=await(await s(dt+"/api/exams?teachedByMe=true",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();i=await mt.parseAsync(v)}catch(C){console.error("Teacher statistics failed!",C)}try{const v=await(await s(dt+"/api/exams",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();u=(await mt.parseAsync(v)).filter(d=>!i.some(k=>k.courseCode===d.courseCode&&k.courseSemester===d.courseSemester&&k.start===d.start))}catch(C){console.error("Teacher statistics failed!",C)}return{taughtExams:i,exams:u}},Ft=Object.freeze(Object.defineProperty({__proto__:null,load:St},Symbol.toStringTag,{value:"Module"}));function bt(s,e,i){const u=s.slice();return u[9]=e[i],u}function Tt(s,e,i){const u=s.slice();return u[9]=e[i],u}function Ct(s){let e,i,u=s[9].courseCode+"",C,v,d,k=s[9].courseSemester+"",U,j,N,$=s[9].start+"",o,O,D,f=s[9].end+"",z,P,y,R=ht(s[9].examType)+"",F,M,w,I=s[9].classRoomAddress+"",B,V,q=s[9].classRoomNumber+"",Q,K,S,x,X="Szerkeszt",m,p,E="Lead",r,h,l;function G(){return s[5](s[9])}function st(){return s[6](s[9])}return{c(){e=n("tr"),i=n("td"),C=L(u),v=b(),d=n("td"),U=L(k),j=b(),N=n("td"),o=L($),O=b(),D=n("td"),z=L(f),P=b(),y=n("td"),F=L(R),M=b(),w=n("td"),B=L(I),V=L(", "),Q=L(q),K=b(),S=n("td"),x=n("button"),x.textContent=X,m=b(),p=n("button"),p.textContent=E,r=b(),this.h()},l(A){e=c(A,"TR",{});var a=g(e);i=c(a,"TD",{});var W=g(i);C=H(W,u),W.forEach(_),v=T(a),d=c(a,"TD",{});var lt=g(d);U=H(lt,k),lt.forEach(_),j=T(a),N=c(a,"TD",{});var ot=g(N);o=H(ot,$),ot.forEach(_),O=T(a),D=c(a,"TD",{});var rt=g(D);z=H(rt,f),rt.forEach(_),P=T(a),y=c(a,"TD",{});var nt=g(y);F=H(nt,R),nt.forEach(_),M=T(a),w=c(a,"TD",{});var tt=g(w);B=H(tt,I),V=H(tt,", "),Q=H(tt,q),tt.forEach(_),K=T(a),S=c(a,"TD",{class:!0});var et=g(S);x=c(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(x)!=="svelte-19btp57"&&(x.textContent=X),m=T(et),p=c(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(p)!=="svelte-1eq5t16"&&(p.textContent=E),et.forEach(_),r=T(a),a.forEach(_),this.h()},h(){Y(x,"class","btn-small"),Y(p,"class","btn-small btn-danger"),Y(S,"class","table-commands")},m(A,a){ft(A,e,a),t(e,i),t(i,C),t(e,v),t(e,d),t(d,U),t(e,j),t(e,N),t(N,o),t(e,O),t(e,D),t(D,z),t(e,P),t(e,y),t(y,F),t(e,M),t(e,w),t(w,B),t(w,V),t(w,Q),t(e,K),t(e,S),t(S,x),t(S,m),t(S,p),t(e,r),h||(l=[ct(x,"click",G),ct(p,"click",st)],h=!0)},p(A,a){s=A,a&1&&u!==(u=s[9].courseCode+"")&&J(C,u),a&1&&k!==(k=s[9].courseSemester+"")&&J(U,k),a&1&&$!==($=s[9].start+"")&&J(o,$),a&1&&f!==(f=s[9].end+"")&&J(z,f),a&1&&R!==(R=ht(s[9].examType)+"")&&J(F,R),a&1&&I!==(I=s[9].classRoomAddress+"")&&J(B,I),a&1&&q!==(q=s[9].classRoomNumber+"")&&J(Q,q)},d(A){A&&_(e),h=!1,gt(l)}}}function Et(s){let e,i,u=s[9].courseCode+"",C,v,d,k=s[9].courseSemester+"",U,j,N,$=s[9].start+"",o,O,D,f=s[9].end+"",z,P,y,R=ht(s[9].examType)+"",F,M,w,I=s[9].classRoomAddress+"",B,V,q=s[9].classRoomNumber+"",Q,K,S,x,X="Oktat",m,p,E="Töröl",r,h,l;function G(){return s[7](s[9])}function st(){return s[8](s[9])}return{c(){e=n("tr"),i=n("td"),C=L(u),v=b(),d=n("td"),U=L(k),j=b(),N=n("td"),o=L($),O=b(),D=n("td"),z=L(f),P=b(),y=n("td"),F=L(R),M=b(),w=n("td"),B=L(I),V=L(", "),Q=L(q),K=b(),S=n("td"),x=n("button"),x.textContent=X,m=b(),p=n("button"),p.textContent=E,r=b(),this.h()},l(A){e=c(A,"TR",{});var a=g(e);i=c(a,"TD",{});var W=g(i);C=H(W,u),W.forEach(_),v=T(a),d=c(a,"TD",{});var lt=g(d);U=H(lt,k),lt.forEach(_),j=T(a),N=c(a,"TD",{});var ot=g(N);o=H(ot,$),ot.forEach(_),O=T(a),D=c(a,"TD",{});var rt=g(D);z=H(rt,f),rt.forEach(_),P=T(a),y=c(a,"TD",{});var nt=g(y);F=H(nt,R),nt.forEach(_),M=T(a),w=c(a,"TD",{});var tt=g(w);B=H(tt,I),V=H(tt,", "),Q=H(tt,q),tt.forEach(_),K=T(a),S=c(a,"TD",{class:!0});var et=g(S);x=c(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(x)!=="svelte-eaq5y6"&&(x.textContent=X),m=T(et),p=c(et,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(p)!=="svelte-12h6nv5"&&(p.textContent=E),et.forEach(_),r=T(a),a.forEach(_),this.h()},h(){Y(x,"class","btn-small"),Y(p,"class","btn-small btn-danger"),Y(S,"class","table-commands")},m(A,a){ft(A,e,a),t(e,i),t(i,C),t(e,v),t(e,d),t(d,U),t(e,j),t(e,N),t(N,o),t(e,O),t(e,D),t(D,z),t(e,P),t(e,y),t(y,F),t(e,M),t(e,w),t(w,B),t(w,V),t(w,Q),t(e,K),t(e,S),t(S,x),t(S,m),t(S,p),t(e,r),h||(l=[ct(x,"click",G),ct(p,"click",st)],h=!0)},p(A,a){s=A,a&1&&u!==(u=s[9].courseCode+"")&&J(C,u),a&1&&k!==(k=s[9].courseSemester+"")&&J(U,k),a&1&&$!==($=s[9].start+"")&&J(o,$),a&1&&f!==(f=s[9].end+"")&&J(z,f),a&1&&R!==(R=ht(s[9].examType)+"")&&J(F,R),a&1&&I!==(I=s[9].classRoomAddress+"")&&J(B,I),a&1&&q!==(q=s[9].classRoomNumber+"")&&J(Q,q)},d(A){A&&_(e),h=!1,gt(l)}}}function xt(s){let e,i,u="Vizsgák",C,v,d,k="Frissítés",U,j,N="Új vizsga",$,o,O="Általam tartott vizsgák",D,f,z,P="<tr><th>Kód</th> <th>Szemeszter</th> <th>Kezdet</th> <th>Vége</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",y,R,F,M,w="További vizsgák",I,B,V,q="<tr><th>Kód</th> <th>Szemeszter</th> <th>Kezdet</th> <th>Vég</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",Q,K,S,x,X=it(s[0].taughtExams),m=[];for(let r=0;r<X.length;r+=1)m[r]=Ct(Tt(s,X,r));let p=it(s[0].exams),E=[];for(let r=0;r<p.length;r+=1)E[r]=Et(bt(s,p,r));return{c(){e=n("div"),i=n("h4"),i.textContent=u,C=b(),v=n("div"),d=n("button"),d.textContent=k,U=b(),j=n("a"),j.textContent=N,$=b(),o=n("h5"),o.textContent=O,D=b(),f=n("table"),z=n("thead"),z.innerHTML=P,y=b(),R=n("tbody");for(let r=0;r<m.length;r+=1)m[r].c();F=b(),M=n("h5"),M.textContent=w,I=b(),B=n("table"),V=n("thead"),V.innerHTML=q,Q=b(),K=n("tbody");for(let r=0;r<E.length;r+=1)E[r].c();this.h()},l(r){e=c(r,"DIV",{class:!0});var h=g(e);i=c(h,"H4",{class:!0,"data-svelte-h":!0}),Z(i)!=="svelte-9hyc3"&&(i.textContent=u),C=T(h),v=c(h,"DIV",{class:!0});var l=g(v);d=c(l,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-cxj7cd"&&(d.textContent=k),U=T(l),j=c(l,"A",{href:!0,class:!0,"data-svelte-h":!0}),Z(j)!=="svelte-1q39u3b"&&(j.textContent=N),l.forEach(_),$=T(h),o=c(h,"H5",{"data-svelte-h":!0}),Z(o)!=="svelte-dwh261"&&(o.textContent=O),D=T(h),f=c(h,"TABLE",{class:!0});var G=g(f);z=c(G,"THEAD",{"data-svelte-h":!0}),Z(z)!=="svelte-r9mz7e"&&(z.innerHTML=P),y=T(G),R=c(G,"TBODY",{});var st=g(R);for(let W=0;W<m.length;W+=1)m[W].l(st);st.forEach(_),G.forEach(_),F=T(h),M=c(h,"H5",{"data-svelte-h":!0}),Z(M)!=="svelte-fyk0wa"&&(M.textContent=w),I=T(h),B=c(h,"TABLE",{class:!0});var A=g(B);V=c(A,"THEAD",{"data-svelte-h":!0}),Z(V)!=="svelte-5twfbr"&&(V.innerHTML=q),Q=T(A),K=c(A,"TBODY",{});var a=g(K);for(let W=0;W<E.length;W+=1)E[W].l(a);a.forEach(_),A.forEach(_),h.forEach(_),this.h()},h(){Y(i,"class","svelte-en0jke"),Y(d,"class","btn-small btn-primary"),Y(j,"href","uj-vizsga"),Y(j,"class","paper-btn btn-small btn-secondary"),Y(v,"class","toolbar"),Y(f,"class","table-hover"),Y(B,"class","table-hover"),Y(e,"class","container")},m(r,h){ft(r,e,h),t(e,i),t(e,C),t(e,v),t(v,d),t(v,U),t(v,j),t(e,$),t(e,o),t(e,D),t(e,f),t(f,z),t(f,y),t(f,R);for(let l=0;l<m.length;l+=1)m[l]&&m[l].m(R,null);t(e,F),t(e,M),t(e,I),t(e,B),t(B,V),t(B,Q),t(B,K);for(let l=0;l<E.length;l+=1)E[l]&&E[l].m(K,null);S||(x=ct(d,"click",s[1]),S=!0)},p(r,[h]){if(h&21){X=it(r[0].taughtExams);let l;for(l=0;l<X.length;l+=1){const G=Tt(r,X,l);m[l]?m[l].p(G,h):(m[l]=Ct(G),m[l].c(),m[l].m(R,null))}for(;l<m.length;l+=1)m[l].d(1);m.length=X.length}if(h&13){p=it(r[0].exams);let l;for(l=0;l<p.length;l+=1){const G=bt(r,p,l);E[l]?E[l].p(G,h):(E[l]=Et(G),E[l].c(),E[l].m(K,null))}for(;l<E.length;l+=1)E[l].d(1);E.length=p.length}},i:_t,o:_t,d(r){r&&_(e),vt(m,r),vt(E,r),S=!1,x()}}}function At(s,e,i){let{data:u}=e;const C=()=>yt(),v=async(o,O,D,f)=>{const z=ut.get("oktato-token"),P=f==="subscribe"?"POST":"DELETE",y=f==="subscribe"?"feliratkozás":"leiratkozás",R=await fetch(`${dt}/api/exams-teach?code=${o}&semester=${O}&start=${encodeURIComponent(D)}`,{method:P,headers:{Authorization:`Bearer ${z}`,"Content-Type":"application/json"}});if(R.status===204)C(),at.push(`Sikeresen ${y} müvelet!`);else{const F=await R.json(),M=await pt.safeParseAsync(F);M.success?at.push(M.data.errorMessage):at.push(`Sikertelen ${y} müvelet!`)}},d=async(o,O,D)=>{const f=ut.get("oktato-token"),z=await fetch(`${dt}/api/exams?code=${o}&semester=${O}&start=${encodeURIComponent(D)}`,{method:"DELETE",headers:{Authorization:`Bearer ${f}`,"Content-Type":"application/json"}});if(z.status===204)C(),at.push("Sikeresen törlés müvelet!");else{const P=await z.json(),y=await pt.safeParseAsync(P);y.success?at.push(y.data.errorMessage):at.push("Sikertelen törlés müvelet!")}},k=async(o,O,D)=>{Rt("szerkeszt-vizsga?exam="+o+"|"+O+"|"+encodeURIComponent(D))},U=o=>k(o.courseCode,o.courseSemester,o.start),j=o=>v(o.courseCode,o.courseSemester,o.start,"unsubscribe"),N=o=>v(o.courseCode,o.courseSemester,o.start,"subscribe"),$=o=>d(o.courseCode,o.courseSemester,o.start);return s.$$set=o=>{"data"in o&&i(0,u=o.data)},[u,C,v,d,k,U,j,N,$]}class It extends Dt{constructor(e){super(),zt(this,e,At,xt,kt,{data:0})}}export{It as component,Ft as universal};
