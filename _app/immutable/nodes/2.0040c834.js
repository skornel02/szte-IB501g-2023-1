import{a as it}from"../chunks/js.cookie.edb2da2a.js";import{b as j}from"../chunks/paths.8d5023ca.js";import{z as $}from"../chunks/index.0ec66d4d.js";import{U as st}from"../chunks/usertypes.f975be66.js";import{s as nt,c as rt,u as ot,g as ft,d as ut,n as ct}from"../chunks/scheduler.e108d1fd.js";import{S as dt,i as vt,g as p,m as y,s as w,h,j as x,n as H,f as a,c as z,y as C,k as D,a as c,x as v,z as _t,d as pt,t as ht}from"../chunks/index.e36b9a99.js";const mt=$.object({name:$.string(),startDate:$.string(),endDate:$.string().nullable()}),kt=$.object({name:$.string(),username:$.string(),degrees:$.array(mt),roles:$.array($.nativeEnum(st))}),bt=!0,Lt=!1,Tt=!0,gt=async()=>{const o=it.get("token");if(!(o===void 0||o.length===0)){try{const t=await fetch(j+"/api/profile",{method:"GET",headers:{Authorization:`Bearer ${o}`}});if(t.status===200){const u=await t.json();return{props:{profile:await kt.parseAsync(u)}}}}catch(t){console.error("Auth check failed with error: ",t)}throw window.location.href=`${j}/hallgato/login`,alert("Hiba történt a bejelentkezés ellenőrzése közben! Próbálja újra később."),Error("Authentication failed!")}},St=Object.freeze(Object.defineProperty({__proto__:null,csr:Tt,load:gt,prerender:bt,ssr:Lt},Symbol.toStringTag,{value:"Module"}));function yt(o){let t=o[1].degrees[0].name+"",u,l,n=o[1].degrees[0].startDate+"",_,d,f=(o[1].degrees[0].endDate??"-")+"",m,i;return{c(){u=y(t),l=y(" ("),_=y(n),d=y(" => "),m=y(f),i=y(")")},l(e){u=H(e,t),l=H(e," ("),_=H(e,n),d=H(e," => "),m=H(e,f),i=H(e,")")},m(e,k){c(e,u,k),c(e,l,k),c(e,_,k),c(e,d,k),c(e,m,k),c(e,i,k)},p:ct,d(e){e&&(a(u),a(l),a(_),a(d),a(m),a(i))}}}function Ht(o){let t,u=`<a href="${`${j}/oktato/kurzusok`}">Kurzusok</a>`,l,n,_=`<a href="${`${j}/oktato/vizsgak`}">Vizsgák</a>`,d,f,m=`<a href="${`${j}/oktato/termek`}">Termek</a>`,i,e,k=`<a href="${`${j}/oktato/statisztikak`}">Statisztikák</a>`,S,M,b=`<a href="${`${j}/oktato/profil`}">Profil</a>`;return{c(){t=p("li"),t.innerHTML=u,l=w(),n=p("li"),n.innerHTML=_,d=w(),f=p("li"),f.innerHTML=m,i=w(),e=p("li"),e.innerHTML=k,S=w(),M=p("li"),M.innerHTML=b},l(s){t=h(s,"LI",{"data-svelte-h":!0}),C(t)!=="svelte-18vu8sy"&&(t.innerHTML=u),l=z(s),n=h(s,"LI",{"data-svelte-h":!0}),C(n)!=="svelte-68fgv4"&&(n.innerHTML=_),d=z(s),f=h(s,"LI",{"data-svelte-h":!0}),C(f)!=="svelte-dmrgai"&&(f.innerHTML=m),i=z(s),e=h(s,"LI",{"data-svelte-h":!0}),C(e)!=="svelte-e5pq2q"&&(e.innerHTML=k),S=z(s),M=h(s,"LI",{"data-svelte-h":!0}),C(M)!=="svelte-1k93dci"&&(M.innerHTML=b)},m(s,L){c(s,t,L),c(s,l,L),c(s,n,L),c(s,d,L),c(s,f,L),c(s,i,L),c(s,e,L),c(s,S,L),c(s,M,L)},d(s){s&&(a(t),a(l),a(n),a(d),a(f),a(i),a(e),a(S),a(M))}}}function Mt(o){let t,u=`<a href="${`${j}/hallgato/kurzusok`}">Kurzusok</a>`,l,n,_=`<a href="${`${j}/hallgato/vizsgak`}">Vizsgák</a>`,d,f,m=`<a href="${`${j}/hallgato/profil`}">Profil</a>`;return{c(){t=p("li"),t.innerHTML=u,l=w(),n=p("li"),n.innerHTML=_,d=w(),f=p("li"),f.innerHTML=m},l(i){t=h(i,"LI",{"data-svelte-h":!0}),C(t)!=="svelte-185t7fw"&&(t.innerHTML=u),l=z(i),n=h(i,"LI",{"data-svelte-h":!0}),C(n)!=="svelte-mnfj6e"&&(n.innerHTML=_),d=z(i),f=h(i,"LI",{"data-svelte-h":!0}),C(f)!=="svelte-1rdzju4"&&(f.innerHTML=m)},m(i,e){c(i,t,e),c(i,l,e),c(i,n,e),c(i,d,e),c(i,f,e)},d(i){i&&(a(t),a(l),a(n),a(d),a(f))}}}function wt(o){let t,u,l,n=o[1].name+"",_,d,f=o[1].username+"",m,i,e,k,S,M,b,s,L,V,W='<div class="bar1"></div> <div class="bar2"></div> <div class="bar3"></div>',R,B,A,F,O,U,X="Logout",K,q,J,Y,I=o[1].degrees.length>0&&yt(o);function at(r,g){if(r[2])return Mt;if(r[3])return Ht}let Z=at(o),P=Z&&Z(o);const Q=o[6].default,T=rt(Q,o,o[5],null);return{c(){t=p("nav"),u=p("div"),l=p("h5"),_=y(n),d=y(" ("),m=y(f),i=y(") "),e=p("br"),k=y(` [
			`),I&&I.c(),S=y(`
			]`),M=w(),b=p("div"),s=p("input"),L=w(),V=p("label"),V.innerHTML=W,R=w(),B=p("div"),A=p("ul"),P&&P.c(),F=w(),O=p("li"),U=p("button"),U.textContent=X,K=w(),T&&T.c(),this.h()},l(r){t=h(r,"NAV",{class:!0});var g=x(t);u=h(g,"DIV",{class:!0});var tt=x(u);l=h(tt,"H5",{});var E=x(l);_=H(E,n),d=H(E," ("),m=H(E,f),i=H(E,") "),e=h(E,"BR",{}),k=H(E,` [
			`),I&&I.l(E),S=H(E,`
			]`),E.forEach(a),tt.forEach(a),M=z(g),b=h(g,"DIV",{class:!0});var N=x(b);s=h(N,"INPUT",{id:!0,type:!0,name:!0}),L=z(N),V=h(N,"LABEL",{for:!0,"data-svelte-h":!0}),C(V)!=="svelte-3tk4sa"&&(V.innerHTML=W),R=z(N),B=h(N,"DIV",{class:!0});var et=x(B);A=h(et,"UL",{class:!0});var G=x(A);P&&P.l(G),F=z(G),O=h(G,"LI",{});var lt=x(O);U=h(lt,"BUTTON",{"data-svelte-h":!0}),C(U)!=="svelte-18t49m"&&(U.textContent=X),lt.forEach(a),G.forEach(a),et.forEach(a),N.forEach(a),g.forEach(a),K=z(r),T&&T.l(r),this.h()},h(){D(u,"class","nav-brand"),D(s,"id","collapsible1"),D(s,"type","checkbox"),D(s,"name","collapsible1"),D(V,"for","collapsible1"),D(A,"class","inline"),D(B,"class","collapsible-body"),D(b,"class","collapsible"),D(t,"class","border split-nav")},m(r,g){c(r,t,g),v(t,u),v(u,l),v(l,_),v(l,d),v(l,m),v(l,i),v(l,e),v(l,k),I&&I.m(l,null),v(l,S),v(t,M),v(t,b),v(b,s),v(b,L),v(b,V),v(b,R),v(b,B),v(B,A),P&&P.m(A,null),v(A,F),v(A,O),v(O,U),c(r,K,g),T&&T.m(r,g),q=!0,J||(Y=_t(U,"click",o[0]),J=!0)},p(r,[g]){r[1].degrees.length>0&&I.p(r,g),T&&T.p&&(!q||g&32)&&ot(T,Q,r,r[5],q?ut(Q,r[5],g,null):ft(r[5]),null)},i(r){q||(pt(T,r),q=!0)},o(r){ht(T,r),q=!1},d(r){r&&(a(t),a(K)),I&&I.d(),P&&P.d(),T&&T.d(r),J=!1,Y()}}}function zt(o,t,u){let{$$slots:l={},$$scope:n}=t,{data:_}=t;if(!_.props)throw new Error("data is undefined");const d=async()=>{it.remove("token",{path:"/hallgato/",secure:!0,sameSite:"strict"}),window.location.href=window.location.href.split("/").slice(0,-1).join("/")+"/login"},{profile:f}=_.props,m=window.location.href.includes("/hallgato/"),i=window.location.href.includes("/oktato/");return o.$$set=e=>{"data"in e&&u(4,_=e.data),"$$scope"in e&&u(5,n=e.$$scope)},[d,f,m,i,_,n,l]}class At extends dt{constructor(t){super(),vt(this,t,zt,wt,nt,{data:4})}}export{At as component,St as universal};
