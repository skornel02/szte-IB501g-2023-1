import{a as se}from"../chunks/js.cookie.edb2da2a.js";import{b as w}from"../chunks/paths.f73f6e8d.js";import{z as $}from"../chunks/index.0ec66d4d.js";import{U as re}from"../chunks/usertypes.d012f79a.js";import{g as ie}from"../chunks/navigation.a1183cab.js";import{s as oe,G as fe,f as _,l as z,a as y,g as b,h as U,m as H,c as j,d as i,L as E,j as M,i as d,x as m,y as ue,n as N,I as ce,J as de,K as pe}from"../chunks/scheduler.3ae9c5b3.js";import{S as me,i as _e,a as be,t as ve}from"../chunks/index.4a313e9c.js";import{t as ke}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.eae3c669.js";const he=$.object({name:$.string(),startDate:$.string(),endDate:$.string().nullable()}),Le=$.object({name:$.string(),username:$.string(),degrees:$.array(he),roles:$.array($.nativeEnum(re))}),ge=!0,Te=!1,ze=!0,ye=async({fetch:f})=>{const a=window.location.href.includes("/hallgato/"),s=se.get((a?"hallgato":"oktato")+"-token");if(!(s===void 0||s.length===0)){try{const e=await f(w+"/api/profile",{method:"GET",headers:{Authorization:`Bearer ${s}`}});if(e.status===200){const t=await e.json();return{props:{profile:await Le.parseAsync(t)}}}}catch(e){console.error("Auth check failed with error: ",e)}throw ie(`${w}/hallgato/login`),alert("Hiba történt a bejelentkezés ellenőrzése közben! Próbálja újra később."),Error("Authentication failed!")}},xe=Object.freeze(Object.defineProperty({__proto__:null,csr:ze,load:ye,prerender:ge,ssr:Te},Symbol.toStringTag,{value:"Module"}));function He(f){let a,s,e=f[0].degrees.length>0&&ae(f);return{c(){a=z(`[
				`),e&&e.c(),s=z(`
				]`)},l(t){a=H(t,`[
				`),e&&e.l(t),s=H(t,`
				]`)},m(t,o){d(t,a,o),e&&e.m(t,o),d(t,s,o)},p(t,o){t[0].degrees.length>0?e?e.p(t,o):(e=ae(t),e.c(),e.m(s.parentNode,s)):e&&(e.d(1),e=null)},d(t){t&&(i(a),i(s)),e&&e.d(t)}}}function ae(f){let a=f[0].degrees[0].name+"",s,e,t=f[0].degrees[0].startDate+"",o,p,r=(f[0].degrees[0].endDate??"-")+"",v,n;return{c(){s=z(a),e=z(" ("),o=z(t),p=z(" => "),v=z(r),n=z(")")},l(l){s=H(l,a),e=H(l," ("),o=H(l,t),p=H(l," => "),v=H(l,r),n=H(l,")")},m(l,h){d(l,s,h),d(l,e,h),d(l,o,h),d(l,p,h),d(l,v,h),d(l,n,h)},p(l,h){h&1&&a!==(a=l[0].degrees[0].name+"")&&N(s,a),h&1&&t!==(t=l[0].degrees[0].startDate+"")&&N(o,t),h&1&&r!==(r=(l[0].degrees[0].endDate??"-")+"")&&N(v,r)},d(l){l&&(i(s),i(e),i(o),i(p),i(v),i(n))}}}function je(f){let a,s=`<a href="${`${w}/oktato/kurzusok`}" class="paper-btn btn-small">Kurzusok</a>`,e,t,o=`<a href="${`${w}/oktato/vizsgak`}" class="paper-btn btn-small">Vizsgák</a>`,p,r,v=`<a href="${`${w}/oktato/termek`}" class="paper-btn btn-small">Termek</a>`,n,l,h=`<a href="${`${w}/oktato/statisztikak`}" class="paper-btn btn-small">Statisztikák</a>`,D,k,I=`<a href="${`${w}/oktato/profil`}" class="paper-btn btn-small">Profil</a>`;return{c(){a=_("li"),a.innerHTML=s,e=y(),t=_("li"),t.innerHTML=o,p=y(),r=_("li"),r.innerHTML=v,n=y(),l=_("li"),l.innerHTML=h,D=y(),k=_("li"),k.innerHTML=I},l(c){a=b(c,"LI",{"data-svelte-h":!0}),E(a)!=="svelte-1nu5crs"&&(a.innerHTML=s),e=j(c),t=b(c,"LI",{"data-svelte-h":!0}),E(t)!=="svelte-hdyf5u"&&(t.innerHTML=o),p=j(c),r=b(c,"LI",{"data-svelte-h":!0}),E(r)!=="svelte-13ikqs8"&&(r.innerHTML=v),n=j(c),l=b(c,"LI",{"data-svelte-h":!0}),E(l)!=="svelte-17ingbd"&&(l.innerHTML=h),D=j(c),k=b(c,"LI",{"data-svelte-h":!0}),E(k)!=="svelte-1wqksi4"&&(k.innerHTML=I)},m(c,L){d(c,a,L),d(c,e,L),d(c,t,L),d(c,p,L),d(c,r,L),d(c,n,L),d(c,l,L),d(c,D,L),d(c,k,L)},d(c){c&&(i(a),i(e),i(t),i(p),i(r),i(n),i(l),i(D),i(k))}}}function Me(f){let a,s=`<a href="${`${w}/hallgato/kurzusok`}" class="paper-btn btn-small">Kurzusok</a>`,e,t,o=`<a href="${`${w}/hallgato/vizsgak`}" class="paper-btn btn-small">Vizsgák</a>`,p,r,v=`<a href="${`${w}/hallgato/profil`}" class="paper-btn btn-small">Profil</a>`;return{c(){a=_("li"),a.innerHTML=s,e=y(),t=_("li"),t.innerHTML=o,p=y(),r=_("li"),r.innerHTML=v},l(n){a=b(n,"LI",{"data-svelte-h":!0}),E(a)!=="svelte-a05mku"&&(a.innerHTML=s),e=j(n),t=b(n,"LI",{"data-svelte-h":!0}),E(t)!=="svelte-dzgwqk"&&(t.innerHTML=o),p=j(n),r=b(n,"LI",{"data-svelte-h":!0}),E(r)!=="svelte-9kbuca"&&(r.innerHTML=v)},m(n,l){d(n,a,l),d(n,e,l),d(n,t,l),d(n,p,l),d(n,r,l)},d(n){n&&(i(a),i(e),i(t),i(p),i(r))}}}function $e(f){let a,s,e,t=f[0].name+"",o,p,r=f[0].username+"",v,n,l,h,D,k,I,c,L,W='<div class="bar1"></div> <div class="bar2"></div> <div class="bar3"></div>',G,q,S,J,F,A,X="Logout",K,P,R,Y,C=f[1]&&He(f);function ne(u,g){if(u[1])return Me;if(u[2])return je}let Z=ne(f),V=Z&&Z(f);const Q=f[6].default,T=fe(Q,f,f[5],null);return{c(){a=_("nav"),s=_("div"),e=_("h5"),o=z(t),p=z(" ("),v=z(r),n=z(") "),l=_("br"),h=y(),C&&C.c(),D=y(),k=_("div"),I=_("input"),c=y(),L=_("label"),L.innerHTML=W,G=y(),q=_("div"),S=_("ul"),V&&V.c(),J=y(),F=_("li"),A=_("button"),A.textContent=X,K=y(),T&&T.c(),this.h()},l(u){a=b(u,"NAV",{class:!0});var g=U(a);s=b(g,"DIV",{class:!0});var ee=U(s);e=b(ee,"H5",{});var x=U(e);o=H(x,t),p=H(x," ("),v=H(x,r),n=H(x,") "),l=b(x,"BR",{}),h=j(x),C&&C.l(x),x.forEach(i),ee.forEach(i),D=j(g),k=b(g,"DIV",{class:!0});var B=U(k);I=b(B,"INPUT",{id:!0,type:!0,name:!0}),c=j(B),L=b(B,"LABEL",{for:!0,"data-svelte-h":!0}),E(L)!=="svelte-3tk4sa"&&(L.innerHTML=W),G=j(B),q=b(B,"DIV",{class:!0});var te=U(q);S=b(te,"UL",{class:!0});var O=U(S);V&&V.l(O),J=j(O),F=b(O,"LI",{});var le=U(F);A=b(le,"BUTTON",{class:!0,"data-svelte-h":!0}),E(A)!=="svelte-3jyzjg"&&(A.textContent=X),le.forEach(i),O.forEach(i),te.forEach(i),B.forEach(i),g.forEach(i),K=j(u),T&&T.l(u),this.h()},h(){M(s,"class","nav-brand"),M(I,"id","collapsible1"),M(I,"type","checkbox"),M(I,"name","collapsible1"),M(L,"for","collapsible1"),M(A,"class","btn-small btn-primary"),M(S,"class","inline"),M(q,"class","collapsible-body"),M(k,"class","collapsible"),M(a,"class","border split-nav")},m(u,g){d(u,a,g),m(a,s),m(s,e),m(e,o),m(e,p),m(e,v),m(e,n),m(e,l),m(e,h),C&&C.m(e,null),m(a,D),m(a,k),m(k,I),m(k,c),m(k,L),m(k,G),m(k,q),m(q,S),V&&V.m(S,null),m(S,J),m(S,F),m(F,A),d(u,K,g),T&&T.m(u,g),P=!0,R||(Y=ue(A,"click",f[3]),R=!0)},p(u,[g]){(!P||g&1)&&t!==(t=u[0].name+"")&&N(o,t),(!P||g&1)&&r!==(r=u[0].username+"")&&N(v,r),u[1]&&C.p(u,g),T&&T.p&&(!P||g&32)&&ce(T,Q,u,u[5],P?pe(Q,u[5],g,null):de(u[5]),null)},i(u){P||(be(T,u),P=!0)},o(u){ve(T,u),P=!1},d(u){u&&(i(a),i(K)),C&&C.d(),V&&V.d(),T&&T.d(u),R=!1,Y()}}}function we(f,a,s){let{$$slots:e={},$$scope:t}=a,{data:o}=a;const p=window.location.href.includes("/hallgato/"),r=window.location.href.includes("/oktato/"),v=async()=>{se.remove((p?"hallgato":"oktato")+"-token",{path:"/",secure:!0,sameSite:"strict"}),ke.push("Sikeres kijelentkezés!"),ie(window.location.href.split("/").slice(0,-1).join("/")+"/login")};let n;return f.$$set=l=>{"data"in l&&s(4,o=l.data),"$$scope"in l&&s(5,t=l.$$scope)},f.$$.update=()=>{var l;f.$$.dirty&16&&s(0,n=((l=o.props)==null?void 0:l.profile)??{name:"hiba, próbálja meg az oldalt újratölteni és/vagy újra bejelentkezni",degrees:[],roles:[],username:"session lejárt?"})},[n,p,r,v,o,t,e]}class Ue extends me{constructor(a){super(),_e(this,a,we,$e,oe,{data:4})}}export{Ue as component,xe as universal};
