import{a as Y}from"../chunks/js.cookie.edb2da2a.js";import{b as M}from"../chunks/paths.0418f812.js";import{z as g,U as ee}from"../chunks/usertypes.276843e8.js";import{s as te,n as q}from"../chunks/scheduler.e108d1fd.js";import{S as le,i as ae,g as h,m as L,s as $,h as p,j as S,n as T,f as n,c as z,y as j,k as H,a as u,x as d,z as ie}from"../chunks/index.13e5c6dd.js";const ne=g.object({name:g.string(),startDate:g.string(),endDate:g.string().nullable()}),re=g.object({name:g.string(),username:g.string(),degrees:g.array(ne),roles:g.array(g.nativeEnum(ee))}),se=!0,oe=!1,fe=!0,ce=async()=>{const f=Y.get("token");if(!(f===void 0||f.length===0)){try{const e=await fetch(M+"/api/profile",{method:"GET",headers:{Authorization:`Bearer ${f}`}});if(e.status===200){const o=await e.json();return{props:{profile:await re.parseAsync(o)}}}}catch(e){console.error("Auth check failed with error: ",e)}throw window.location.href=`${M}/hallgato/login`,alert("A bejelentkezése lejárt!"),Error("Authentication failed!")}},Te=Object.freeze(Object.defineProperty({__proto__:null,csr:fe,load:ce,prerender:se,ssr:oe},Symbol.toStringTag,{value:"Module"}));function ue(f){let e=f[1].degrees[0].name+"",o,l,r=f[1].degrees[0].startDate+"",_,c,s=(f[1].degrees[0].endDate??"-")+"",v,i;return{c(){o=L(e),l=L(" ("),_=L(r),c=L(" => "),v=L(s),i=L(")")},l(t){o=T(t,e),l=T(t," ("),_=T(t,r),c=T(t," => "),v=T(t,s),i=T(t,")")},m(t,k){u(t,o,k),u(t,l,k),u(t,_,k),u(t,c,k),u(t,v,k),u(t,i,k)},p:q,d(t){t&&(n(o),n(l),n(_),n(c),n(v),n(i))}}}function de(f){let e,o=`<a href="${`${M}/oktato/kurzusok`}">Kurzusok</a>`,l,r,_=`<a href="${`${M}/oktato/vizsgak`}">Vizsgák</a>`,c,s,v=`<a href="${`${M}/oktato/termek`}">Termek</a>`,i,t,k=`<a href="${`${M}/oktato/profil`}">Profil</a>`;return{c(){e=h("li"),e.innerHTML=o,l=$(),r=h("li"),r.innerHTML=_,c=$(),s=h("li"),s.innerHTML=v,i=$(),t=h("li"),t.innerHTML=k},l(a){e=p(a,"LI",{"data-svelte-h":!0}),j(e)!=="svelte-18vu8sy"&&(e.innerHTML=o),l=z(a),r=p(a,"LI",{"data-svelte-h":!0}),j(r)!=="svelte-68fgv4"&&(r.innerHTML=_),c=z(a),s=p(a,"LI",{"data-svelte-h":!0}),j(s)!=="svelte-dmrgai"&&(s.innerHTML=v),i=z(a),t=p(a,"LI",{"data-svelte-h":!0}),j(t)!=="svelte-1k93dci"&&(t.innerHTML=k)},m(a,m){u(a,e,m),u(a,l,m),u(a,r,m),u(a,c,m),u(a,s,m),u(a,i,m),u(a,t,m)},d(a){a&&(n(e),n(l),n(r),n(c),n(s),n(i),n(t))}}}function ve(f){let e,o=`<a href="${`${M}/hallgato/kurzusok`}">Kurzusok</a>`,l,r,_=`<a href="${`${M}/hallgato/vizsgak`}">Vizsgák</a>`,c,s,v=`<a href="${`${M}/hallgato/profil`}">Profil</a>`;return{c(){e=h("li"),e.innerHTML=o,l=$(),r=h("li"),r.innerHTML=_,c=$(),s=h("li"),s.innerHTML=v},l(i){e=p(i,"LI",{"data-svelte-h":!0}),j(e)!=="svelte-185t7fw"&&(e.innerHTML=o),l=z(i),r=p(i,"LI",{"data-svelte-h":!0}),j(r)!=="svelte-mnfj6e"&&(r.innerHTML=_),c=z(i),s=p(i,"LI",{"data-svelte-h":!0}),j(s)!=="svelte-1rdzju4"&&(s.innerHTML=v)},m(i,t){u(i,e,t),u(i,l,t),u(i,r,t),u(i,c,t),u(i,s,t)},d(i){i&&(n(e),n(l),n(r),n(c),n(s))}}}function he(f){let e,o,l,r=f[1].name+"",_,c,s=f[1].username+"",v,i,t,k,a,m,B,I,G='<div class="bar1"></div> <div class="bar2"></div> <div class="bar3"></div>',N,A,C,O,P,x,F="Logout",K,J,y=f[1].degrees.length>0&&ue(f);function Z(b,w){if(b[2])return ve;if(b[3])return de}let Q=Z(f),E=Q&&Q(f);return{c(){e=h("nav"),o=h("div"),l=h("h5"),_=L(r),c=L(" ("),v=L(s),i=L(`) [
			`),y&&y.c(),t=L(`
			]`),k=$(),a=h("div"),m=h("input"),B=$(),I=h("label"),I.innerHTML=G,N=$(),A=h("div"),C=h("ul"),E&&E.c(),O=$(),P=h("li"),x=h("button"),x.textContent=F,this.h()},l(b){e=p(b,"NAV",{class:!0});var w=S(e);o=p(w,"DIV",{class:!0});var R=S(o);l=p(R,"H5",{});var D=S(l);_=T(D,r),c=T(D," ("),v=T(D,s),i=T(D,`) [
			`),y&&y.l(D),t=T(D,`
			]`),D.forEach(n),R.forEach(n),k=z(w),a=p(w,"DIV",{class:!0});var V=S(a);m=p(V,"INPUT",{id:!0,type:!0,name:!0}),B=z(V),I=p(V,"LABEL",{for:!0,"data-svelte-h":!0}),j(I)!=="svelte-3tk4sa"&&(I.innerHTML=G),N=z(V),A=p(V,"DIV",{class:!0});var W=S(A);C=p(W,"UL",{class:!0});var U=S(C);E&&E.l(U),O=z(U),P=p(U,"LI",{});var X=S(P);x=p(X,"BUTTON",{"data-svelte-h":!0}),j(x)!=="svelte-18t49m"&&(x.textContent=F),X.forEach(n),U.forEach(n),W.forEach(n),V.forEach(n),w.forEach(n),this.h()},h(){H(o,"class","nav-brand"),H(m,"id","collapsible1"),H(m,"type","checkbox"),H(m,"name","collapsible1"),H(I,"for","collapsible1"),H(C,"class","inline"),H(A,"class","collapsible-body"),H(a,"class","collapsible"),H(e,"class","border fixed split-nav")},m(b,w){u(b,e,w),d(e,o),d(o,l),d(l,_),d(l,c),d(l,v),d(l,i),y&&y.m(l,null),d(l,t),d(e,k),d(e,a),d(a,m),d(a,B),d(a,I),d(a,N),d(a,A),d(A,C),E&&E.m(C,null),d(C,O),d(C,P),d(P,x),K||(J=ie(x,"click",f[0]),K=!0)},p(b,[w]){b[1].degrees.length>0&&y.p(b,w)},i:q,o:q,d(b){b&&n(e),y&&y.d(),E&&E.d(),K=!1,J()}}}function pe(f,e,o){let{data:l}=e;if(!l.props)throw new Error("data is undefined");const r=async()=>{Y.remove("token",{path:"/hallgato/",secure:!0,sameSite:"strict"}),window.location.href=window.location.href.split("/").slice(0,-1).join("/")+"/login"},{profile:_}=l.props,c=window.location.href.includes("/hallgato/"),s=window.location.href.includes("/oktato/");return f.$$set=v=>{"data"in v&&o(4,l=v.data)},[r,_,c,s,l]}class ge extends le{constructor(e){super(),ae(this,e,pe,he,te,{data:4})}}export{ge as component,Te as universal};
