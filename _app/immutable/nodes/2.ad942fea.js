import{a as lt}from"../chunks/js.cookie.edb2da2a.js";import{b as w}from"../chunks/paths.535d24fc.js";import{z as $}from"../chunks/index.0ec66d4d.js";import{U as it}from"../chunks/usertypes.f975be66.js";import{g as at}from"../chunks/navigation.b5643576.js";import{s as nt,k as rt,u as ot,l as ft,m as ut,n as ct}from"../chunks/scheduler.572f10a3.js";import{S as pt,i as dt,g as _,m as y,s as z,h as b,j as V,n as H,c as j,f as s,I as E,k as M,a as c,C as m,D as mt,d as _t,t as bt}from"../chunks/index.21ac587f.js";import{t as vt}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.0ce08224.js";const kt=$.object({name:$.string(),startDate:$.string(),endDate:$.string().nullable()}),ht=$.object({name:$.string(),username:$.string(),degrees:$.array(kt),roles:$.array($.nativeEnum(it))}),Lt=!0,Tt=!1,gt=!0,yt=async()=>{const o=window.location.href.includes("/hallgato/"),t=lt.get((o?"hallgato":"oktato")+"-token");if(!(t===void 0||t.length===0)){try{const i=await fetch(w+"/api/profile",{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(i.status===200){const e=await i.json();return{props:{profile:await ht.parseAsync(e)}}}}catch(i){console.error("Auth check failed with error: ",i)}throw at(`${w}/hallgato/login`),alert("Hiba történt a bejelentkezés ellenőrzése közben! Próbálja újra később."),Error("Authentication failed!")}},Vt=Object.freeze(Object.defineProperty({__proto__:null,csr:gt,load:yt,prerender:Lt,ssr:Tt},Symbol.toStringTag,{value:"Module"}));function zt(o){let t,i,e=o[3].degrees.length>0&&Ht(o);return{c(){t=y(`[
				`),e&&e.c(),i=y(`
				]`)},l(l){t=H(l,`[
				`),e&&e.l(l),i=H(l,`
				]`)},m(l,f){c(l,t,f),e&&e.m(l,f),c(l,i,f)},p(l,f){l[3].degrees.length>0&&e.p(l,f)},d(l){l&&(s(t),s(i)),e&&e.d(l)}}}function Ht(o){let t=o[3].degrees[0].name+"",i,e,l=o[3].degrees[0].startDate+"",f,d,p=(o[3].degrees[0].endDate??"-")+"",h,n;return{c(){i=y(t),e=y(" ("),f=y(l),d=y(" => "),h=y(p),n=y(")")},l(a){i=H(a,t),e=H(a," ("),f=H(a,l),d=H(a," => "),h=H(a,p),n=H(a,")")},m(a,L){c(a,i,L),c(a,e,L),c(a,f,L),c(a,d,L),c(a,h,L),c(a,n,L)},p:ct,d(a){a&&(s(i),s(e),s(f),s(d),s(h),s(n))}}}function jt(o){let t,i=`<a href="${`${w}/oktato/kurzusok`}" class="paper-btn btn-small">Kurzusok</a>`,e,l,f=`<a href="${`${w}/oktato/vizsgak`}" class="paper-btn btn-small">Vizsgák</a>`,d,p,h=`<a href="${`${w}/oktato/termek`}" class="paper-btn btn-small">Termek</a>`,n,a,L=`<a href="${`${w}/oktato/statisztikak`}" class="paper-btn btn-small">Statisztikák</a>`,D,v,C=`<a href="${`${w}/oktato/profil`}" class="paper-btn btn-small">Profil</a>`;return{c(){t=_("li"),t.innerHTML=i,e=z(),l=_("li"),l.innerHTML=f,d=z(),p=_("li"),p.innerHTML=h,n=z(),a=_("li"),a.innerHTML=L,D=z(),v=_("li"),v.innerHTML=C},l(r){t=b(r,"LI",{"data-svelte-h":!0}),E(t)!=="svelte-1nu5crs"&&(t.innerHTML=i),e=j(r),l=b(r,"LI",{"data-svelte-h":!0}),E(l)!=="svelte-hdyf5u"&&(l.innerHTML=f),d=j(r),p=b(r,"LI",{"data-svelte-h":!0}),E(p)!=="svelte-13ikqs8"&&(p.innerHTML=h),n=j(r),a=b(r,"LI",{"data-svelte-h":!0}),E(a)!=="svelte-17ingbd"&&(a.innerHTML=L),D=j(r),v=b(r,"LI",{"data-svelte-h":!0}),E(v)!=="svelte-1wqksi4"&&(v.innerHTML=C)},m(r,k){c(r,t,k),c(r,e,k),c(r,l,k),c(r,d,k),c(r,p,k),c(r,n,k),c(r,a,k),c(r,D,k),c(r,v,k)},d(r){r&&(s(t),s(e),s(l),s(d),s(p),s(n),s(a),s(D),s(v))}}}function Mt(o){let t,i=`<a href="${`${w}/hallgato/kurzusok`}" class="paper-btn btn-small">Kurzusok</a>`,e,l,f=`<a href="${`${w}/hallgato/vizsgak`}" class="paper-btn btn-small">Vizsgák</a>`,d,p,h=`<a href="${`${w}/hallgato/profil`}" class="paper-btn btn-small">Profil</a>`;return{c(){t=_("li"),t.innerHTML=i,e=z(),l=_("li"),l.innerHTML=f,d=z(),p=_("li"),p.innerHTML=h},l(n){t=b(n,"LI",{"data-svelte-h":!0}),E(t)!=="svelte-a05mku"&&(t.innerHTML=i),e=j(n),l=b(n,"LI",{"data-svelte-h":!0}),E(l)!=="svelte-dzgwqk"&&(l.innerHTML=f),d=j(n),p=b(n,"LI",{"data-svelte-h":!0}),E(p)!=="svelte-9kbuca"&&(p.innerHTML=h)},m(n,a){c(n,t,a),c(n,e,a),c(n,l,a),c(n,d,a),c(n,p,a)},d(n){n&&(s(t),s(e),s(l),s(d),s(p))}}}function $t(o){let t,i,e,l=o[3].name+"",f,d,p=o[3].username+"",h,n,a,L,D,v,C,r,k,Q='<div class="bar1"></div> <div class="bar2"></div> <div class="bar3"></div>',K,U,S,G,F,x,W="Logout",N,q,R,X,I=o[0]&&zt(o);function st(u,g){if(u[0])return Mt;if(u[1])return jt}let Y=st(o),A=Y&&Y(o);const J=o[6].default,T=rt(J,o,o[5],null);return{c(){t=_("nav"),i=_("div"),e=_("h5"),f=y(l),d=y(" ("),h=y(p),n=y(") "),a=_("br"),L=z(),I&&I.c(),D=z(),v=_("div"),C=_("input"),r=z(),k=_("label"),k.innerHTML=Q,K=z(),U=_("div"),S=_("ul"),A&&A.c(),G=z(),F=_("li"),x=_("button"),x.textContent=W,N=z(),T&&T.c(),this.h()},l(u){t=b(u,"NAV",{class:!0});var g=V(t);i=b(g,"DIV",{class:!0});var Z=V(i);e=b(Z,"H5",{});var P=V(e);f=H(P,l),d=H(P," ("),h=H(P,p),n=H(P,") "),a=b(P,"BR",{}),L=j(P),I&&I.l(P),P.forEach(s),Z.forEach(s),D=j(g),v=b(g,"DIV",{class:!0});var B=V(v);C=b(B,"INPUT",{id:!0,type:!0,name:!0}),r=j(B),k=b(B,"LABEL",{for:!0,"data-svelte-h":!0}),E(k)!=="svelte-3tk4sa"&&(k.innerHTML=Q),K=j(B),U=b(B,"DIV",{class:!0});var tt=V(U);S=b(tt,"UL",{class:!0});var O=V(S);A&&A.l(O),G=j(O),F=b(O,"LI",{});var et=V(F);x=b(et,"BUTTON",{class:!0,"data-svelte-h":!0}),E(x)!=="svelte-3jyzjg"&&(x.textContent=W),et.forEach(s),O.forEach(s),tt.forEach(s),B.forEach(s),g.forEach(s),N=j(u),T&&T.l(u),this.h()},h(){M(i,"class","nav-brand"),M(C,"id","collapsible1"),M(C,"type","checkbox"),M(C,"name","collapsible1"),M(k,"for","collapsible1"),M(x,"class","btn-small btn-primary"),M(S,"class","inline"),M(U,"class","collapsible-body"),M(v,"class","collapsible"),M(t,"class","border split-nav")},m(u,g){c(u,t,g),m(t,i),m(i,e),m(e,f),m(e,d),m(e,h),m(e,n),m(e,a),m(e,L),I&&I.m(e,null),m(t,D),m(t,v),m(v,C),m(v,r),m(v,k),m(v,K),m(v,U),m(U,S),A&&A.m(S,null),m(S,G),m(S,F),m(F,x),c(u,N,g),T&&T.m(u,g),q=!0,R||(X=mt(x,"click",o[2]),R=!0)},p(u,[g]){u[0]&&I.p(u,g),T&&T.p&&(!q||g&32)&&ot(T,J,u,u[5],q?ut(J,u[5],g,null):ft(u[5]),null)},i(u){q||(_t(T,u),q=!0)},o(u){bt(T,u),q=!1},d(u){u&&(s(t),s(N)),I&&I.d(),A&&A.d(),T&&T.d(u),R=!1,X()}}}function wt(o,t,i){let{$$slots:e={},$$scope:l}=t,{data:f}=t;const d=window.location.href.includes("/hallgato/"),p=window.location.href.includes("/oktato/"),h=async()=>{lt.remove((d?"hallgato":"oktato")+"-token",{path:"/",secure:!0,sameSite:"strict"}),vt.push("Sikeres kijelentkezés!"),at(window.location.href.split("/").slice(0,-1).join("/")+"/login")},{profile:n}=f.props??{profile:{name:"hiba, próbálja meg az oldalt újratölteni és/vagy újra bejelentkezni",degrees:[],roles:[],username:"session lejárt?"}};return o.$$set=a=>{"data"in a&&i(4,f=a.data),"$$scope"in a&&i(5,l=a.$$scope)},[d,p,h,n,f,l,e]}class Ut extends pt{constructor(t){super(),dt(this,t,wt,$t,nt,{data:4})}}export{Ut as component,Vt as universal};
