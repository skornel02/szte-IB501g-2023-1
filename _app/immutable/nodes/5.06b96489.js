import{a as Se}from"../chunks/js.cookie.edb2da2a.js";import{C as be}from"../chunks/CourseDto.28e601c3.js";import{z as pe}from"../chunks/index.0ec66d4d.js";import{b as me}from"../chunks/paths.b1006c39.js";import{s as Ne,f as c,a as v,g as d,h as p,L as Z,c as b,d as f,j as W,i as ve,x as e,y as ue,C as Ce,M as Te,l as R,m as A,n as F,z as ye}from"../chunks/scheduler.3ae9c5b3.js";import{e as ie}from"../chunks/each.ed53a14b.js";import{S as Re,i as Ae}from"../chunks/index.4a313e9c.js";import{i as Be,g as je}from"../chunks/navigation.ea4a083b.js";import{C as he}from"../chunks/coursetypes.cef0f3cc.js";import{t as ke}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.eae3c669.js";const Le=async({fetch:s})=>{const t=Se.get("hallgato-token");let u=[],_=[];try{const T=await(await s(me+"/api/courses?attendedByMe=true",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();u=await pe.array(be).parseAsync(T)}catch(C){console.error("Learning courses fetch failed!",C)}console.log({attendedCourses:u});try{const T=await(await s(me+"/api/courses",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();_=(await pe.array(be).parseAsync(T)).filter(i=>!u.some(E=>E.courseCode===i.courseCode&&E.courseSemester===i.courseSemester))}catch(C){console.error("Courses fetch failed!",C)}return{attendedCourses:u,courses:_}},Ye=Object.freeze(Object.defineProperty({__proto__:null,load:Le},Symbol.toStringTag,{value:"Module"}));function ge(s,t,u){const _=s.slice();return _[8]=t[u],_}function Ee(s,t,u){const _=s.slice();return _[8]=t[u],_}function De(s){let t,u,_=s[8].courseCode+"",C,T,i,E=s[8].courseSemester+"",U,L,O,n=s[8].courseName+"",k,B,H,j=s[8].hours+"",D,Q,S,P=s[8].credits+"",q,M,y,G=he(s[8].courseType)+"",J,I,z,Y=s[8].classRoomAddress+"",w,m,N=s[8].classRoomNumber+"",h,a,r,o,$="Vizsgák",X,g,te="Lead",V,se,le;function fe(){return s[4](s[8])}function _e(){return s[5](s[8])}return{c(){t=c("tr"),u=c("td"),C=R(_),T=v(),i=c("td"),U=R(E),L=v(),O=c("td"),k=R(n),B=v(),H=c("td"),D=R(j),Q=v(),S=c("td"),q=R(P),M=v(),y=c("td"),J=R(G),I=v(),z=c("td"),w=R(Y),m=R(", "),h=R(N),a=v(),r=c("td"),o=c("button"),o.textContent=$,X=v(),g=c("button"),g.textContent=te,V=v(),this.h()},l(K){t=d(K,"TR",{});var l=p(t);u=d(l,"TD",{});var oe=p(u);C=A(oe,_),oe.forEach(f),T=b(l),i=d(l,"TD",{});var ae=p(i);U=A(ae,E),ae.forEach(f),L=b(l),O=d(l,"TD",{});var re=p(O);k=A(re,n),re.forEach(f),B=b(l),H=d(l,"TD",{});var ne=p(H);D=A(ne,j),ne.forEach(f),Q=b(l),S=d(l,"TD",{});var ce=p(S);q=A(ce,P),ce.forEach(f),M=b(l),y=d(l,"TD",{});var de=p(y);J=A(de,G),de.forEach(f),I=b(l),z=d(l,"TD",{});var x=p(z);w=A(x,Y),m=A(x,", "),h=A(x,N),x.forEach(f),a=b(l),r=d(l,"TD",{class:!0});var ee=p(r);o=d(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-rp95zb"&&(o.textContent=$),X=b(ee),g=d(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(g)!=="svelte-1f0fked"&&(g.textContent=te),ee.forEach(f),V=b(l),l.forEach(f),this.h()},h(){W(o,"class","btn-small btn-secondary"),W(g,"class","btn-small"),W(r,"class","table-commands")},m(K,l){ve(K,t,l),e(t,u),e(u,C),e(t,T),e(t,i),e(i,U),e(t,L),e(t,O),e(O,k),e(t,B),e(t,H),e(H,D),e(t,Q),e(t,S),e(S,q),e(t,M),e(t,y),e(y,J),e(t,I),e(t,z),e(z,w),e(z,m),e(z,h),e(t,a),e(t,r),e(r,o),e(r,X),e(r,g),e(t,V),se||(le=[ue(o,"click",fe),ue(g,"click",_e)],se=!0)},p(K,l){s=K,l&1&&_!==(_=s[8].courseCode+"")&&F(C,_),l&1&&E!==(E=s[8].courseSemester+"")&&F(U,E),l&1&&n!==(n=s[8].courseName+"")&&F(k,n),l&1&&j!==(j=s[8].hours+"")&&F(D,j),l&1&&P!==(P=s[8].credits+"")&&F(q,P),l&1&&G!==(G=he(s[8].courseType)+"")&&F(J,G),l&1&&Y!==(Y=s[8].classRoomAddress+"")&&F(w,Y),l&1&&N!==(N=s[8].classRoomNumber+"")&&F(h,N)},d(K){K&&f(t),se=!1,ye(le)}}}function ze(s){let t,u,_=s[8].courseCode+"",C,T,i,E=s[8].courseSemester+"",U,L,O,n=s[8].courseName+"",k,B,H,j=s[8].hours+"",D,Q,S,P=s[8].credits+"",q,M,y,G=he(s[8].courseType)+"",J,I,z,Y=s[8].classRoomAddress+"",w,m,N=s[8].classRoomNumber+"",h,a,r,o,$="Vizsgák",X,g,te="Felvesz",V,se,le;function fe(){return s[6](s[8])}function _e(){return s[7](s[8])}return{c(){t=c("tr"),u=c("td"),C=R(_),T=v(),i=c("td"),U=R(E),L=v(),O=c("td"),k=R(n),B=v(),H=c("td"),D=R(j),Q=v(),S=c("td"),q=R(P),M=v(),y=c("td"),J=R(G),I=v(),z=c("td"),w=R(Y),m=R(", "),h=R(N),a=v(),r=c("td"),o=c("button"),o.textContent=$,X=v(),g=c("button"),g.textContent=te,V=v(),this.h()},l(K){t=d(K,"TR",{});var l=p(t);u=d(l,"TD",{});var oe=p(u);C=A(oe,_),oe.forEach(f),T=b(l),i=d(l,"TD",{});var ae=p(i);U=A(ae,E),ae.forEach(f),L=b(l),O=d(l,"TD",{});var re=p(O);k=A(re,n),re.forEach(f),B=b(l),H=d(l,"TD",{});var ne=p(H);D=A(ne,j),ne.forEach(f),Q=b(l),S=d(l,"TD",{});var ce=p(S);q=A(ce,P),ce.forEach(f),M=b(l),y=d(l,"TD",{});var de=p(y);J=A(de,G),de.forEach(f),I=b(l),z=d(l,"TD",{});var x=p(z);w=A(x,Y),m=A(x,", "),h=A(x,N),x.forEach(f),a=b(l),r=d(l,"TD",{class:!0});var ee=p(r);o=d(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(o)!=="svelte-rp95zb"&&(o.textContent=$),X=b(ee),g=d(ee,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(g)!=="svelte-1wjyspp"&&(g.textContent=te),ee.forEach(f),V=b(l),l.forEach(f),this.h()},h(){W(o,"class","btn-small btn-secondary"),W(g,"class","btn-small"),W(r,"class","table-commands")},m(K,l){ve(K,t,l),e(t,u),e(u,C),e(t,T),e(t,i),e(i,U),e(t,L),e(t,O),e(O,k),e(t,B),e(t,H),e(H,D),e(t,Q),e(t,S),e(S,q),e(t,M),e(t,y),e(y,J),e(t,I),e(t,z),e(z,w),e(z,m),e(z,h),e(t,a),e(t,r),e(r,o),e(r,X),e(r,g),e(t,V),se||(le=[ue(o,"click",fe),ue(g,"click",_e)],se=!0)},p(K,l){s=K,l&1&&_!==(_=s[8].courseCode+"")&&F(C,_),l&1&&E!==(E=s[8].courseSemester+"")&&F(U,E),l&1&&n!==(n=s[8].courseName+"")&&F(k,n),l&1&&j!==(j=s[8].hours+"")&&F(D,j),l&1&&P!==(P=s[8].credits+"")&&F(q,P),l&1&&G!==(G=he(s[8].courseType)+"")&&F(J,G),l&1&&Y!==(Y=s[8].classRoomAddress+"")&&F(w,Y),l&1&&N!==(N=s[8].classRoomNumber+"")&&F(h,N)},d(K){K&&f(t),se=!1,ye(le)}}}function Oe(s){let t,u,_="Kurzusok",C,T,i,E="Frissítés",U,L,O="Általam felvett kurzusok",n,k,B,H="<tr><th>Kód</th> <th>Szemeszter</th> <th>Név</th> <th>Óraszám</th> <th>Credit</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",j,D,Q,S,P="További kurzusok",q,M,y,G="<tr><th>Kód</th> <th>Szemeszter</th> <th>Név</th> <th>Óraszám</th> <th>Credit</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",J,I,z,Y,w=ie(s[0].attendedCourses),m=[];for(let a=0;a<w.length;a+=1)m[a]=De(Ee(s,w,a));let N=ie(s[0].courses),h=[];for(let a=0;a<N.length;a+=1)h[a]=ze(ge(s,N,a));return{c(){t=c("div"),u=c("h4"),u.textContent=_,C=v(),T=c("div"),i=c("button"),i.textContent=E,U=v(),L=c("h5"),L.textContent=O,n=v(),k=c("table"),B=c("thead"),B.innerHTML=H,j=v(),D=c("tbody");for(let a=0;a<m.length;a+=1)m[a].c();Q=v(),S=c("h5"),S.textContent=P,q=v(),M=c("table"),y=c("thead"),y.innerHTML=G,J=v(),I=c("tbody");for(let a=0;a<h.length;a+=1)h[a].c();this.h()},l(a){t=d(a,"DIV",{class:!0});var r=p(t);u=d(r,"H4",{class:!0,"data-svelte-h":!0}),Z(u)!=="svelte-1do8vtc"&&(u.textContent=_),C=b(r),T=d(r,"DIV",{class:!0});var o=p(T);i=d(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(i)!=="svelte-cxj7cd"&&(i.textContent=E),o.forEach(f),U=b(r),L=d(r,"H5",{"data-svelte-h":!0}),Z(L)!=="svelte-i40n3g"&&(L.textContent=O),n=b(r),k=d(r,"TABLE",{class:!0});var $=p(k);B=d($,"THEAD",{"data-svelte-h":!0}),Z(B)!=="svelte-7bvx2k"&&(B.innerHTML=H),j=b($),D=d($,"TBODY",{});var X=p(D);for(let V=0;V<m.length;V+=1)m[V].l(X);X.forEach(f),$.forEach(f),Q=b(r),S=d(r,"H5",{"data-svelte-h":!0}),Z(S)!=="svelte-1srfm57"&&(S.textContent=P),q=b(r),M=d(r,"TABLE",{class:!0});var g=p(M);y=d(g,"THEAD",{"data-svelte-h":!0}),Z(y)!=="svelte-7bvx2k"&&(y.innerHTML=G),J=b(g),I=d(g,"TBODY",{});var te=p(I);for(let V=0;V<h.length;V+=1)h[V].l(te);te.forEach(f),g.forEach(f),r.forEach(f),this.h()},h(){W(u,"class","svelte-en0jke"),W(i,"class","btn-small btn-primary"),W(T,"class","toolbar"),W(k,"class","table-hover"),W(M,"class","table-hover"),W(t,"class","container")},m(a,r){ve(a,t,r),e(t,u),e(t,C),e(t,T),e(T,i),e(t,U),e(t,L),e(t,n),e(t,k),e(k,B),e(k,j),e(k,D);for(let o=0;o<m.length;o+=1)m[o]&&m[o].m(D,null);e(t,Q),e(t,S),e(t,q),e(t,M),e(M,y),e(M,J),e(M,I);for(let o=0;o<h.length;o+=1)h[o]&&h[o].m(I,null);z||(Y=ue(i,"click",s[1]),z=!0)},p(a,[r]){if(r&13){w=ie(a[0].attendedCourses);let o;for(o=0;o<w.length;o+=1){const $=Ee(a,w,o);m[o]?m[o].p($,r):(m[o]=De($),m[o].c(),m[o].m(D,null))}for(;o<m.length;o+=1)m[o].d(1);m.length=w.length}if(r&13){N=ie(a[0].courses);let o;for(o=0;o<N.length;o+=1){const $=ge(a,N,o);h[o]?h[o].p($,r):(h[o]=ze($),h[o].c(),h[o].m(I,null))}for(;o<h.length;o+=1)h[o].d(1);h.length=N.length}},i:Ce,o:Ce,d(a){a&&f(t),Te(m,a),Te(h,a),z=!1,Y()}}}function He(s,t,u){let{data:_}=t;const C=()=>Be(),T=async(n,k,B)=>{const H=Se.get("hallgato-token"),j=B==="subscribe"?"POSt":"DELETE",D=B==="subscribe"?"feliratkozás":"leiratkozás";(await fetch(`${me}/api/course-learn?code=${n}&semester=${k}`,{method:j,headers:{Authorization:`Bearer ${H}`,"Content-Type":"application/json"}})).status===204?(C(),ke.push(`Sikeresen ${D} müvelet!`)):ke.push(`Sikertelen ${D} müvelet!`)},i=async(n,k)=>{je("vizsga?course="+n+"|"+k)},E=n=>i(n.courseCode,n.courseSemester),U=n=>T(n.courseCode,n.courseSemester,"unsubscribe"),L=n=>i(n.courseCode,n.courseSemester),O=n=>T(n.courseCode,n.courseSemester,"subscribe");return s.$$set=n=>{"data"in n&&u(0,_=n.data)},[_,C,T,i,E,U,L,O]}class qe extends Re{constructor(t){super(),Ae(this,t,He,Oe,Ne,{data:0})}}export{qe as component,Ye as universal};
