import{a as ge}from"../chunks/js.cookie.edb2da2a.js";import{C as fe}from"../chunks/CourseDto.28e601c3.js";import{z as _e}from"../chunks/index.0ec66d4d.js";import{b as he}from"../chunks/paths.1bf8872c.js";import{s as ke,n as me}from"../chunks/scheduler.572f10a3.js";import{S as De,i as Se,g as n,s as p,h as d,j as v,I as ee,c as b,f as u,k as X,a as ue,C as t,D as ie,J as ve,m as R,n as y,o as O}from"../chunks/index.21ac587f.js";import{e as de}from"../chunks/each.73a1c622.js";import{i as ze}from"../chunks/navigation.f10c6a59.js";import{C as ce}from"../chunks/coursetypes.cef0f3cc.js";import{t as pe}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.0ce08224.js";const Re=async({fetch:o})=>{const e=ge.get("hallgato-token");let c=[],i=[];try{const C=await(await o(he+"/api/courses?attendedByMe=true",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();c=await _e.array(fe).parseAsync(C)}catch(T){console.error("Learning courses fetch failed!",T)}console.log({attendedCourses:c});try{const C=await(await o(he+"/api/courses",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();i=(await _e.array(fe).parseAsync(C)).filter(f=>!c.some(g=>g.courseCode===f.courseCode&&g.courseSemester===f.courseSemester))}catch(T){console.error("Courses fetch failed!",T)}return{attendedCourses:c,courses:i}},Ie=Object.freeze(Object.defineProperty({__proto__:null,load:Re},Symbol.toStringTag,{value:"Module"}));function be(o,e,c){const i=o.slice();return i[5]=e[c],i}function Te(o,e,c){const i=o.slice();return i[5]=e[c],i}function Ce(o){let e,c,i=o[5].courseCode+"",T,C,f,g=o[5].courseSemester+"",m,B,N,A=o[5].courseName+"",E,j,$,F=o[5].hours+"",H,J,D,K=o[5].credits+"",V,L,S,P=ce(o[5].courseType)+"",Y,U,k,G=o[5].classRoomAddress+"",w,_,z=o[5].classRoomNumber+"",h,a,r,l,M="Lead",W,q,x;function Q(){return o[3](o[5])}return{c(){e=n("tr"),c=n("td"),T=R(i),C=p(),f=n("td"),m=R(g),B=p(),N=n("td"),E=R(A),j=p(),$=n("td"),H=R(F),J=p(),D=n("td"),V=R(K),L=p(),S=n("td"),Y=R(P),U=p(),k=n("td"),w=R(G),_=R(", "),h=R(z),a=p(),r=n("td"),l=n("button"),l.textContent=M,W=p(),this.h()},l(I){e=d(I,"TR",{});var s=v(e);c=d(s,"TD",{});var te=v(c);T=y(te,i),te.forEach(u),C=b(s),f=d(s,"TD",{});var se=v(f);m=y(se,g),se.forEach(u),B=b(s),N=d(s,"TD",{});var le=v(N);E=y(le,A),le.forEach(u),j=b(s),$=d(s,"TD",{});var oe=v($);H=y(oe,F),oe.forEach(u),J=b(s),D=d(s,"TD",{});var ae=v(D);V=y(ae,K),ae.forEach(u),L=b(s),S=d(s,"TD",{});var re=v(S);Y=y(re,P),re.forEach(u),U=b(s),k=d(s,"TD",{});var Z=v(k);w=y(Z,G),_=y(Z,", "),h=y(Z,z),Z.forEach(u),a=b(s),r=d(s,"TD",{class:!0});var ne=v(r);l=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-1f0fked"&&(l.textContent=M),ne.forEach(u),W=b(s),s.forEach(u),this.h()},h(){X(l,"class","btn-small"),X(r,"class","table-commands")},m(I,s){ue(I,e,s),t(e,c),t(c,T),t(e,C),t(e,f),t(f,m),t(e,B),t(e,N),t(N,E),t(e,j),t(e,$),t($,H),t(e,J),t(e,D),t(D,V),t(e,L),t(e,S),t(S,Y),t(e,U),t(e,k),t(k,w),t(k,_),t(k,h),t(e,a),t(e,r),t(r,l),t(e,W),q||(x=ie(l,"click",Q),q=!0)},p(I,s){o=I,s&1&&i!==(i=o[5].courseCode+"")&&O(T,i),s&1&&g!==(g=o[5].courseSemester+"")&&O(m,g),s&1&&A!==(A=o[5].courseName+"")&&O(E,A),s&1&&F!==(F=o[5].hours+"")&&O(H,F),s&1&&K!==(K=o[5].credits+"")&&O(V,K),s&1&&P!==(P=ce(o[5].courseType)+"")&&O(Y,P),s&1&&G!==(G=o[5].classRoomAddress+"")&&O(w,G),s&1&&z!==(z=o[5].classRoomNumber+"")&&O(h,z)},d(I){I&&u(e),q=!1,x()}}}function Ee(o){let e,c,i=o[5].courseCode+"",T,C,f,g=o[5].courseSemester+"",m,B,N,A=o[5].courseName+"",E,j,$,F=o[5].hours+"",H,J,D,K=o[5].credits+"",V,L,S,P=ce(o[5].courseType)+"",Y,U,k,G=o[5].classRoomAddress+"",w,_,z=o[5].classRoomNumber+"",h,a,r,l,M="Felvesz",W,q,x;function Q(){return o[4](o[5])}return{c(){e=n("tr"),c=n("td"),T=R(i),C=p(),f=n("td"),m=R(g),B=p(),N=n("td"),E=R(A),j=p(),$=n("td"),H=R(F),J=p(),D=n("td"),V=R(K),L=p(),S=n("td"),Y=R(P),U=p(),k=n("td"),w=R(G),_=R(", "),h=R(z),a=p(),r=n("td"),l=n("button"),l.textContent=M,W=p(),this.h()},l(I){e=d(I,"TR",{});var s=v(e);c=d(s,"TD",{});var te=v(c);T=y(te,i),te.forEach(u),C=b(s),f=d(s,"TD",{});var se=v(f);m=y(se,g),se.forEach(u),B=b(s),N=d(s,"TD",{});var le=v(N);E=y(le,A),le.forEach(u),j=b(s),$=d(s,"TD",{});var oe=v($);H=y(oe,F),oe.forEach(u),J=b(s),D=d(s,"TD",{});var ae=v(D);V=y(ae,K),ae.forEach(u),L=b(s),S=d(s,"TD",{});var re=v(S);Y=y(re,P),re.forEach(u),U=b(s),k=d(s,"TD",{});var Z=v(k);w=y(Z,G),_=y(Z,", "),h=y(Z,z),Z.forEach(u),a=b(s),r=d(s,"TD",{class:!0});var ne=v(r);l=d(ne,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(l)!=="svelte-1wjyspp"&&(l.textContent=M),ne.forEach(u),W=b(s),s.forEach(u),this.h()},h(){X(l,"class","btn-small"),X(r,"class","table-commands")},m(I,s){ue(I,e,s),t(e,c),t(c,T),t(e,C),t(e,f),t(f,m),t(e,B),t(e,N),t(N,E),t(e,j),t(e,$),t($,H),t(e,J),t(e,D),t(D,V),t(e,L),t(e,S),t(S,Y),t(e,U),t(e,k),t(k,w),t(k,_),t(k,h),t(e,a),t(e,r),t(r,l),t(e,W),q||(x=ie(l,"click",Q),q=!0)},p(I,s){o=I,s&1&&i!==(i=o[5].courseCode+"")&&O(T,i),s&1&&g!==(g=o[5].courseSemester+"")&&O(m,g),s&1&&A!==(A=o[5].courseName+"")&&O(E,A),s&1&&F!==(F=o[5].hours+"")&&O(H,F),s&1&&K!==(K=o[5].credits+"")&&O(V,K),s&1&&P!==(P=ce(o[5].courseType)+"")&&O(Y,P),s&1&&G!==(G=o[5].classRoomAddress+"")&&O(w,G),s&1&&z!==(z=o[5].classRoomNumber+"")&&O(h,z)},d(I){I&&u(e),q=!1,x()}}}function ye(o){let e,c,i="Kurzusok",T,C,f,g="Frissítés",m,B,N="Általam felvett kurzusok",A,E,j,$="<tr><th>Kód</th> <th>Szemeszter</th> <th>Név</th> <th>Óraszám</th> <th>Credit</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",F,H,J,D,K="További kurzusok",V,L,S,P="<tr><th>Kód</th> <th>Szemeszter</th> <th>Név</th> <th>Óraszám</th> <th>Credit</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",Y,U,k,G,w=de(o[0].attendedCourses),_=[];for(let a=0;a<w.length;a+=1)_[a]=Ce(Te(o,w,a));let z=de(o[0].courses),h=[];for(let a=0;a<z.length;a+=1)h[a]=Ee(be(o,z,a));return{c(){e=n("div"),c=n("h4"),c.textContent=i,T=p(),C=n("div"),f=n("button"),f.textContent=g,m=p(),B=n("h5"),B.textContent=N,A=p(),E=n("table"),j=n("thead"),j.innerHTML=$,F=p(),H=n("tbody");for(let a=0;a<_.length;a+=1)_[a].c();J=p(),D=n("h5"),D.textContent=K,V=p(),L=n("table"),S=n("thead"),S.innerHTML=P,Y=p(),U=n("tbody");for(let a=0;a<h.length;a+=1)h[a].c();this.h()},l(a){e=d(a,"DIV",{class:!0});var r=v(e);c=d(r,"H4",{class:!0,"data-svelte-h":!0}),ee(c)!=="svelte-1do8vtc"&&(c.textContent=i),T=b(r),C=d(r,"DIV",{class:!0});var l=v(C);f=d(l,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(f)!=="svelte-cxj7cd"&&(f.textContent=g),l.forEach(u),m=b(r),B=d(r,"H5",{"data-svelte-h":!0}),ee(B)!=="svelte-i40n3g"&&(B.textContent=N),A=b(r),E=d(r,"TABLE",{class:!0});var M=v(E);j=d(M,"THEAD",{"data-svelte-h":!0}),ee(j)!=="svelte-7bvx2k"&&(j.innerHTML=$),F=b(M),H=d(M,"TBODY",{});var W=v(H);for(let Q=0;Q<_.length;Q+=1)_[Q].l(W);W.forEach(u),M.forEach(u),J=b(r),D=d(r,"H5",{"data-svelte-h":!0}),ee(D)!=="svelte-1srfm57"&&(D.textContent=K),V=b(r),L=d(r,"TABLE",{class:!0});var q=v(L);S=d(q,"THEAD",{"data-svelte-h":!0}),ee(S)!=="svelte-7bvx2k"&&(S.innerHTML=P),Y=b(q),U=d(q,"TBODY",{});var x=v(U);for(let Q=0;Q<h.length;Q+=1)h[Q].l(x);x.forEach(u),q.forEach(u),r.forEach(u),this.h()},h(){X(c,"class","svelte-en0jke"),X(f,"class","btn-small btn-primary"),X(C,"class","toolbar"),X(E,"class","table-hover"),X(L,"class","table-hover"),X(e,"class","container")},m(a,r){ue(a,e,r),t(e,c),t(e,T),t(e,C),t(C,f),t(e,m),t(e,B),t(e,A),t(e,E),t(E,j),t(E,F),t(E,H);for(let l=0;l<_.length;l+=1)_[l]&&_[l].m(H,null);t(e,J),t(e,D),t(e,V),t(e,L),t(L,S),t(L,Y),t(L,U);for(let l=0;l<h.length;l+=1)h[l]&&h[l].m(U,null);k||(G=ie(f,"click",o[1]),k=!0)},p(a,[r]){if(r&5){w=de(a[0].attendedCourses);let l;for(l=0;l<w.length;l+=1){const M=Te(a,w,l);_[l]?_[l].p(M,r):(_[l]=Ce(M),_[l].c(),_[l].m(H,null))}for(;l<_.length;l+=1)_[l].d(1);_.length=w.length}if(r&5){z=de(a[0].courses);let l;for(l=0;l<z.length;l+=1){const M=be(a,z,l);h[l]?h[l].p(M,r):(h[l]=Ee(M),h[l].c(),h[l].m(U,null))}for(;l<h.length;l+=1)h[l].d(1);h.length=z.length}},i:me,o:me,d(a){a&&u(e),ve(_,a),ve(h,a),k=!1,G()}}}function Ne(o,e,c){let{data:i}=e;const T=()=>ze(),C=async(m,B,N)=>{const A=ge.get("hallgato-token"),E=N==="subscribe"?"POSt":"DELETE",j=N==="subscribe"?"feliratkozás":"leiratkozás";(await fetch(`${he}/api/course-learn?code=${m}&semester=${B}`,{method:E,headers:{Authorization:`Bearer ${A}`,"Content-Type":"application/json"}})).status===204?(T(),pe.push(`Sikeresen ${j} müvelet!`)):pe.push(`Sikertelen ${j} müvelet!`)},f=m=>C(m.courseCode,m.courseSemester,"unsubscribe"),g=m=>C(m.courseCode,m.courseSemester,"subscribe");return o.$$set=m=>{"data"in m&&c(0,i=m.data)},[i,T,C,f,g]}class Ke extends De{constructor(e){super(),Se(this,e,Ne,ye,ke,{data:0})}}export{Ke as component,Ie as universal};
