import{a as vt}from"../chunks/js.cookie.edb2da2a.js";import{b as rt}from"../chunks/paths.5e87fca0.js";import{E as ct}from"../chunks/ExamDto.2ccd907e.js";import{s as pt,f as r,a as b,g as n,h as T,L as Z,c as E,d as f,j as Q,i as nt,x as s,y as dt,C as it,M as ht,l as M,m as H,n as P}from"../chunks/scheduler.2c2a7c16.js";import{e as at}from"../chunks/each.66c50b25.js";import{S as bt,i as Tt}from"../chunks/index.cec4e112.js";import{i as Et}from"../chunks/navigation.63f2fb0e.js";import{t as ot}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.e45ffa17.js";import{E as lt}from"../chunks/examtypes.71cfa446.js";import{E as gt}from"../chunks/ErrorResponseDto.3330ec0e.js";const Ct=async({fetch:a})=>{const e=vt.get("hallgato-token");let d=[],c=[];try{const m=await(await a(rt+"/api/exams?attendedByMe=true",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();d=await ct.parseAsync(m)}catch(p){console.error("Teacher statistics failed!",p)}try{const m=await(await a(rt+"/api/exams",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).json();c=(await ct.parseAsync(m)).filter(i=>!d.some(g=>g.courseCode===i.courseCode&&g.courseSemester===i.courseSemester&&g.start===i.start))}catch(p){console.error("Teacher statistics failed!",p)}return{attendedExams:d,exams:c}},Ht=Object.freeze(Object.defineProperty({__proto__:null,load:Ct},Symbol.toStringTag,{value:"Module"}));function ut(a,e,d){const c=a.slice();return c[5]=e[d],c}function ft(a,e,d){const c=a.slice();return c[5]=e[d],c}function mt(a){let e,d,c=a[5].courseCode+"",p,m,i,g=a[5].courseSemester+"",h,k,w,D=a[5].start+"",R,Y,y,_=a[5].end+"",z,U,L,S=lt(a[5].examType)+"",q,$,A,N=a[5].classRoomAddress+"",j,O,V=a[5].classRoomNumber+"",I,F,x,C,J="Lead",u,K,v;function o(){return a[3](a[5])}return{c(){e=r("tr"),d=r("td"),p=M(c),m=b(),i=r("td"),h=M(g),k=b(),w=r("td"),R=M(D),Y=b(),y=r("td"),z=M(_),U=b(),L=r("td"),q=M(S),$=b(),A=r("td"),j=M(N),O=M(", "),I=M(V),F=b(),x=r("td"),C=r("button"),C.textContent=J,u=b(),this.h()},l(l){e=n(l,"TR",{});var t=T(e);d=n(t,"TD",{});var B=T(d);p=H(B,c),B.forEach(f),m=E(t),i=n(t,"TD",{});var tt=T(i);h=H(tt,g),tt.forEach(f),k=E(t),w=n(t,"TD",{});var W=T(w);R=H(W,D),W.forEach(f),Y=E(t),y=n(t,"TD",{});var et=T(y);z=H(et,_),et.forEach(f),U=E(t),L=n(t,"TD",{});var G=T(L);q=H(G,S),G.forEach(f),$=E(t),A=n(t,"TD",{});var X=T(A);j=H(X,N),O=H(X,", "),I=H(X,V),X.forEach(f),F=E(t),x=n(t,"TD",{class:!0});var st=T(x);C=n(st,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(C)!=="svelte-1eq5t16"&&(C.textContent=J),st.forEach(f),u=E(t),t.forEach(f),this.h()},h(){Q(C,"class","btn-small btn-danger"),Q(x,"class","table-commands")},m(l,t){nt(l,e,t),s(e,d),s(d,p),s(e,m),s(e,i),s(i,h),s(e,k),s(e,w),s(w,R),s(e,Y),s(e,y),s(y,z),s(e,U),s(e,L),s(L,q),s(e,$),s(e,A),s(A,j),s(A,O),s(A,I),s(e,F),s(e,x),s(x,C),s(e,u),K||(v=dt(C,"click",o),K=!0)},p(l,t){a=l,t&1&&c!==(c=a[5].courseCode+"")&&P(p,c),t&1&&g!==(g=a[5].courseSemester+"")&&P(h,g),t&1&&D!==(D=a[5].start+"")&&P(R,D),t&1&&_!==(_=a[5].end+"")&&P(z,_),t&1&&S!==(S=lt(a[5].examType)+"")&&P(q,S),t&1&&N!==(N=a[5].classRoomAddress+"")&&P(j,N),t&1&&V!==(V=a[5].classRoomNumber+"")&&P(I,V)},d(l){l&&f(e),K=!1,v()}}}function _t(a){let e,d,c=a[5].courseCode+"",p,m,i,g=a[5].courseSemester+"",h,k,w,D=a[5].start+"",R,Y,y,_=a[5].end+"",z,U,L,S=lt(a[5].examType)+"",q,$,A,N=a[5].classRoomAddress+"",j,O,V=a[5].classRoomNumber+"",I,F,x,C,J="Felvesz",u,K,v;function o(){return a[4](a[5])}return{c(){e=r("tr"),d=r("td"),p=M(c),m=b(),i=r("td"),h=M(g),k=b(),w=r("td"),R=M(D),Y=b(),y=r("td"),z=M(_),U=b(),L=r("td"),q=M(S),$=b(),A=r("td"),j=M(N),O=M(", "),I=M(V),F=b(),x=r("td"),C=r("button"),C.textContent=J,u=b(),this.h()},l(l){e=n(l,"TR",{});var t=T(e);d=n(t,"TD",{});var B=T(d);p=H(B,c),B.forEach(f),m=E(t),i=n(t,"TD",{});var tt=T(i);h=H(tt,g),tt.forEach(f),k=E(t),w=n(t,"TD",{});var W=T(w);R=H(W,D),W.forEach(f),Y=E(t),y=n(t,"TD",{});var et=T(y);z=H(et,_),et.forEach(f),U=E(t),L=n(t,"TD",{});var G=T(L);q=H(G,S),G.forEach(f),$=E(t),A=n(t,"TD",{});var X=T(A);j=H(X,N),O=H(X,", "),I=H(X,V),X.forEach(f),F=E(t),x=n(t,"TD",{class:!0});var st=T(x);C=n(st,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(C)!=="svelte-2kg0n6"&&(C.textContent=J),st.forEach(f),u=E(t),t.forEach(f),this.h()},h(){Q(C,"class","btn-small"),Q(x,"class","table-commands")},m(l,t){nt(l,e,t),s(e,d),s(d,p),s(e,m),s(e,i),s(i,h),s(e,k),s(e,w),s(w,R),s(e,Y),s(e,y),s(y,z),s(e,U),s(e,L),s(L,q),s(e,$),s(e,A),s(A,j),s(A,O),s(A,I),s(e,F),s(e,x),s(x,C),s(e,u),K||(v=dt(C,"click",o),K=!0)},p(l,t){a=l,t&1&&c!==(c=a[5].courseCode+"")&&P(p,c),t&1&&g!==(g=a[5].courseSemester+"")&&P(h,g),t&1&&D!==(D=a[5].start+"")&&P(R,D),t&1&&_!==(_=a[5].end+"")&&P(z,_),t&1&&S!==(S=lt(a[5].examType)+"")&&P(q,S),t&1&&N!==(N=a[5].classRoomAddress+"")&&P(j,N),t&1&&V!==(V=a[5].classRoomNumber+"")&&P(I,V)},d(l){l&&f(e),K=!1,v()}}}function kt(a){let e,d,c="Vizsgák",p,m,i,g="Frissítés",h,k,w="Új vizsga",D,R,Y="Általam felvett vizsgák",y,_,z,U="<tr><th>Kód</th> <th>Szemeszter</th> <th>Kezdet</th> <th>Vége</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",L,S,q,$,A="További vizsgák",N,j,O,V="<tr><th>Kód</th> <th>Szemeszter</th> <th>Kezdet</th> <th>Vég</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",I,F,x,C,J=at(a[0].attendedExams),u=[];for(let o=0;o<J.length;o+=1)u[o]=mt(ft(a,J,o));let K=at(a[0].exams),v=[];for(let o=0;o<K.length;o+=1)v[o]=_t(ut(a,K,o));return{c(){e=r("div"),d=r("h4"),d.textContent=c,p=b(),m=r("div"),i=r("button"),i.textContent=g,h=b(),k=r("a"),k.textContent=w,D=b(),R=r("h5"),R.textContent=Y,y=b(),_=r("table"),z=r("thead"),z.innerHTML=U,L=b(),S=r("tbody");for(let o=0;o<u.length;o+=1)u[o].c();q=b(),$=r("h5"),$.textContent=A,N=b(),j=r("table"),O=r("thead"),O.innerHTML=V,I=b(),F=r("tbody");for(let o=0;o<v.length;o+=1)v[o].c();this.h()},l(o){e=n(o,"DIV",{class:!0});var l=T(e);d=n(l,"H4",{class:!0,"data-svelte-h":!0}),Z(d)!=="svelte-9hyc3"&&(d.textContent=c),p=E(l),m=n(l,"DIV",{class:!0});var t=T(m);i=n(t,"BUTTON",{class:!0,"data-svelte-h":!0}),Z(i)!=="svelte-cxj7cd"&&(i.textContent=g),h=E(t),k=n(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),Z(k)!=="svelte-1q39u3b"&&(k.textContent=w),t.forEach(f),D=E(l),R=n(l,"H5",{"data-svelte-h":!0}),Z(R)!=="svelte-lt1dx9"&&(R.textContent=Y),y=E(l),_=n(l,"TABLE",{class:!0});var B=T(_);z=n(B,"THEAD",{"data-svelte-h":!0}),Z(z)!=="svelte-r9mz7e"&&(z.innerHTML=U),L=E(B),S=n(B,"TBODY",{});var tt=T(S);for(let G=0;G<u.length;G+=1)u[G].l(tt);tt.forEach(f),B.forEach(f),q=E(l),$=n(l,"H5",{"data-svelte-h":!0}),Z($)!=="svelte-fyk0wa"&&($.textContent=A),N=E(l),j=n(l,"TABLE",{class:!0});var W=T(j);O=n(W,"THEAD",{"data-svelte-h":!0}),Z(O)!=="svelte-5twfbr"&&(O.innerHTML=V),I=E(W),F=n(W,"TBODY",{});var et=T(F);for(let G=0;G<v.length;G+=1)v[G].l(et);et.forEach(f),W.forEach(f),l.forEach(f),this.h()},h(){Q(d,"class","svelte-en0jke"),Q(i,"class","btn-small btn-primary"),Q(k,"href","uj-vizsga"),Q(k,"class","paper-btn btn-small btn-secondary"),Q(m,"class","toolbar"),Q(_,"class","table-hover"),Q(j,"class","table-hover"),Q(e,"class","container")},m(o,l){nt(o,e,l),s(e,d),s(e,p),s(e,m),s(m,i),s(m,h),s(m,k),s(e,D),s(e,R),s(e,y),s(e,_),s(_,z),s(_,L),s(_,S);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(S,null);s(e,q),s(e,$),s(e,N),s(e,j),s(j,O),s(j,I),s(j,F);for(let t=0;t<v.length;t+=1)v[t]&&v[t].m(F,null);x||(C=dt(i,"click",a[1]),x=!0)},p(o,[l]){if(l&5){J=at(o[0].attendedExams);let t;for(t=0;t<J.length;t+=1){const B=ft(o,J,t);u[t]?u[t].p(B,l):(u[t]=mt(B),u[t].c(),u[t].m(S,null))}for(;t<u.length;t+=1)u[t].d(1);u.length=J.length}if(l&5){K=at(o[0].exams);let t;for(t=0;t<K.length;t+=1){const B=ut(o,K,t);v[t]?v[t].p(B,l):(v[t]=_t(B),v[t].c(),v[t].m(F,null))}for(;t<v.length;t+=1)v[t].d(1);v.length=K.length}},i:it,o:it,d(o){o&&f(e),ht(u,o),ht(v,o),x=!1,C()}}}function Dt(a,e,d){let{data:c}=e;const p=()=>Et(),m=async(h,k,w,D)=>{const R=vt.get("hallgato-token"),Y=D==="subscribe"?"POST":"DELETE",y=D==="subscribe"?"feliratkozás":"leiratkozás",_=await fetch(`${rt}/api/exams-learn?code=${h}&semester=${k}&start=${encodeURIComponent(w)}`,{method:Y,headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}});if(_.status===204)p(),ot.push(`Sikeresen ${y} müvelet!`);else{const z=await _.json(),U=await gt.safeParseAsync(z);U.success?ot.push(U.data.errorMessage):ot.push(`Sikertelen ${y} müvelet!`)}},i=h=>m(h.courseCode,h.courseSemester,h.start,"unsubscribe"),g=h=>m(h.courseCode,h.courseSemester,h.start,"subscribe");return a.$$set=h=>{"data"in h&&d(0,c=h.data)},[c,p,m,i,g]}class Lt extends bt{constructor(e){super(),Tt(this,e,Dt,kt,pt,{data:0})}}export{Lt as component,Ht as universal};
