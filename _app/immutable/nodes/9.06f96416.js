import{a as pe}from"../chunks/js.cookie.edb2da2a.js";import{C as Ce}from"../chunks/CourseDto.28e601c3.js";import{z as Te}from"../chunks/index.0ec66d4d.js";import{b as _e}from"../chunks/paths.cbaa310c.js";import{s as Ae,f as c,a as m,g as u,h as k,L as ee,c as v,d,j as Q,i as be,x as e,y as de,C as ke,M as Ee,l as j,m as B,n as H,z as Re}from"../chunks/scheduler.21bd8612.js";import{e as fe}from"../chunks/each.ec07e198.js";import{S as Ne,i as je}from"../chunks/index.2510bc2d.js";import{i as Be,g as we}from"../chunks/navigation.53551334.js";import{C as me}from"../chunks/coursetypes.cef0f3cc.js";import{t as le}from"../chunks/SvelteToast.svelte_svelte_type_style_lang.79e974c9.js";import{E as ge}from"../chunks/ErrorResponseDto.3330ec0e.js";const Me=async({fetch:s})=>{const t=pe.get("oktato-token");let i=[],f=[];try{const C=await(await s(_e+"/api/courses?teachedByMe=true",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();i=await Te.array(Ce).parseAsync(C)}catch(E){console.error("Teacher statistics failed!",E)}try{const C=await(await s(_e+"/api/courses",{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();f=(await Te.array(Ce).parseAsync(C)).filter(_=>!i.some(g=>g.courseCode===_.courseCode&&g.courseSemester===_.courseSemester))}catch(E){console.error("Teacher statistics failed!",E)}return{taughtCourses:i,courses:f}},Ye=Object.freeze(Object.defineProperty({__proto__:null,load:Me},Symbol.toStringTag,{value:"Module"}));function De(s,t,i){const f=s.slice();return f[9]=t[i],f}function ye(s,t,i){const f=s.slice();return f[9]=t[i],f}function Se(s){let t,i,f=s[9].courseCode+"",E,C,_,g=s[9].courseSemester+"",P,z,M,w=s[9].courseName+"",l,O,D,p=s[9].hours+"",y,U,R,S=s[9].credits+"",$,G,I,q=me(s[9].courseType)+"",A,Y,N,K=s[9].classRoomAddress+"",L,X,J=s[9].classRoomNumber+"",x,b,T,n,r="Vizsga hirdetés",h,o,F="Lead",te,W,ae;function Z(){return s[5](s[9])}function ve(){return s[6](s[9])}return{c(){t=c("tr"),i=c("td"),E=j(f),C=m(),_=c("td"),P=j(g),z=m(),M=c("td"),l=j(w),O=m(),D=c("td"),y=j(p),U=m(),R=c("td"),$=j(S),G=m(),I=c("td"),A=j(q),Y=m(),N=c("td"),L=j(K),X=j(", "),x=j(J),b=m(),T=c("td"),n=c("button"),n.textContent=r,h=m(),o=c("button"),o.textContent=F,te=m(),this.h()},l(V){t=u(V,"TR",{});var a=k(t);i=u(a,"TD",{});var re=k(i);E=B(re,f),re.forEach(d),C=v(a),_=u(a,"TD",{});var ne=k(_);P=B(ne,g),ne.forEach(d),z=v(a),M=u(a,"TD",{});var ce=k(M);l=B(ce,w),ce.forEach(d),O=v(a),D=u(a,"TD",{});var ue=k(D);y=B(ue,p),ue.forEach(d),U=v(a),R=u(a,"TD",{});var ie=k(R);$=B(ie,S),ie.forEach(d),G=v(a),I=u(a,"TD",{});var he=k(I);A=B(he,q),he.forEach(d),Y=v(a),N=u(a,"TD",{});var se=k(N);L=B(se,K),X=B(se,", "),x=B(se,J),se.forEach(d),b=v(a),T=u(a,"TD",{class:!0});var oe=k(T);n=u(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-6rv1eh"&&(n.textContent=r),h=v(oe),o=u(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-136kcrr"&&(o.textContent=F),oe.forEach(d),te=v(a),a.forEach(d),this.h()},h(){Q(n,"class","btn-small"),Q(o,"class","btn-small btn-danger"),Q(T,"class","table-commands")},m(V,a){be(V,t,a),e(t,i),e(i,E),e(t,C),e(t,_),e(_,P),e(t,z),e(t,M),e(M,l),e(t,O),e(t,D),e(D,y),e(t,U),e(t,R),e(R,$),e(t,G),e(t,I),e(I,A),e(t,Y),e(t,N),e(N,L),e(N,X),e(N,x),e(t,b),e(t,T),e(T,n),e(T,h),e(T,o),e(t,te),W||(ae=[de(n,"click",Z),de(o,"click",ve)],W=!0)},p(V,a){s=V,a&1&&f!==(f=s[9].courseCode+"")&&H(E,f),a&1&&g!==(g=s[9].courseSemester+"")&&H(P,g),a&1&&w!==(w=s[9].courseName+"")&&H(l,w),a&1&&p!==(p=s[9].hours+"")&&H(y,p),a&1&&S!==(S=s[9].credits+"")&&H($,S),a&1&&q!==(q=me(s[9].courseType)+"")&&H(A,q),a&1&&K!==(K=s[9].classRoomAddress+"")&&H(L,K),a&1&&J!==(J=s[9].classRoomNumber+"")&&H(x,J)},d(V){V&&d(t),W=!1,Re(ae)}}}function ze(s){let t,i,f=s[9].courseCode+"",E,C,_,g=s[9].courseSemester+"",P,z,M,w=s[9].courseName+"",l,O,D,p=s[9].hours+"",y,U,R,S=s[9].credits+"",$,G,I,q=me(s[9].courseType)+"",A,Y,N,K=s[9].classRoomAddress+"",L,X,J=s[9].classRoomNumber+"",x,b,T,n,r="Oktat",h,o,F="Töröl",te,W,ae;function Z(){return s[7](s[9])}function ve(){return s[8](s[9])}return{c(){t=c("tr"),i=c("td"),E=j(f),C=m(),_=c("td"),P=j(g),z=m(),M=c("td"),l=j(w),O=m(),D=c("td"),y=j(p),U=m(),R=c("td"),$=j(S),G=m(),I=c("td"),A=j(q),Y=m(),N=c("td"),L=j(K),X=j(", "),x=j(J),b=m(),T=c("td"),n=c("button"),n.textContent=r,h=m(),o=c("button"),o.textContent=F,te=m(),this.h()},l(V){t=u(V,"TR",{});var a=k(t);i=u(a,"TD",{});var re=k(i);E=B(re,f),re.forEach(d),C=v(a),_=u(a,"TD",{});var ne=k(_);P=B(ne,g),ne.forEach(d),z=v(a),M=u(a,"TD",{});var ce=k(M);l=B(ce,w),ce.forEach(d),O=v(a),D=u(a,"TD",{});var ue=k(D);y=B(ue,p),ue.forEach(d),U=v(a),R=u(a,"TD",{});var ie=k(R);$=B(ie,S),ie.forEach(d),G=v(a),I=u(a,"TD",{});var he=k(I);A=B(he,q),he.forEach(d),Y=v(a),N=u(a,"TD",{});var se=k(N);L=B(se,K),X=B(se,", "),x=B(se,J),se.forEach(d),b=v(a),T=u(a,"TD",{class:!0});var oe=k(T);n=u(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(n)!=="svelte-1mmuyf5"&&(n.textContent=r),h=v(oe),o=u(oe,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(o)!=="svelte-u0kdy2"&&(o.textContent=F),oe.forEach(d),te=v(a),a.forEach(d),this.h()},h(){Q(n,"class","btn-small"),Q(o,"class","btn-small btn-danger"),Q(T,"class","table-commands")},m(V,a){be(V,t,a),e(t,i),e(i,E),e(t,C),e(t,_),e(_,P),e(t,z),e(t,M),e(M,l),e(t,O),e(t,D),e(D,y),e(t,U),e(t,R),e(R,$),e(t,G),e(t,I),e(I,A),e(t,Y),e(t,N),e(N,L),e(N,X),e(N,x),e(t,b),e(t,T),e(T,n),e(T,h),e(T,o),e(t,te),W||(ae=[de(n,"click",Z),de(o,"click",ve)],W=!0)},p(V,a){s=V,a&1&&f!==(f=s[9].courseCode+"")&&H(E,f),a&1&&g!==(g=s[9].courseSemester+"")&&H(P,g),a&1&&w!==(w=s[9].courseName+"")&&H(l,w),a&1&&p!==(p=s[9].hours+"")&&H(y,p),a&1&&S!==(S=s[9].credits+"")&&H($,S),a&1&&q!==(q=me(s[9].courseType)+"")&&H(A,q),a&1&&K!==(K=s[9].classRoomAddress+"")&&H(L,K),a&1&&J!==(J=s[9].classRoomNumber+"")&&H(x,J)},d(V){V&&d(t),W=!1,Re(ae)}}}function Oe(s){let t,i,f="Kurzusok",E,C,_,g="Frissítés",P,z,M="Új kurzus",w,l,O="Általam tartott kurzusok",D,p,y,U="<tr><th>Kód</th> <th>Szemeszter</th> <th>Név</th> <th>Óraszám</th> <th>Credit</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",R,S,$,G,I="További kurzusok",q,A,Y,N="<tr><th>Kód</th> <th>Szemeszter</th> <th>Név</th> <th>Óraszám</th> <th>Credit</th> <th>Típus</th> <th>Terem</th> <th>Műveletek</th></tr>",K,L,X,J,x=fe(s[0].taughtCourses),b=[];for(let r=0;r<x.length;r+=1)b[r]=Se(ye(s,x,r));let T=fe(s[0].courses),n=[];for(let r=0;r<T.length;r+=1)n[r]=ze(De(s,T,r));return{c(){t=c("div"),i=c("h4"),i.textContent=f,E=m(),C=c("div"),_=c("button"),_.textContent=g,P=m(),z=c("a"),z.textContent=M,w=m(),l=c("h5"),l.textContent=O,D=m(),p=c("table"),y=c("thead"),y.innerHTML=U,R=m(),S=c("tbody");for(let r=0;r<b.length;r+=1)b[r].c();$=m(),G=c("h5"),G.textContent=I,q=m(),A=c("table"),Y=c("thead"),Y.innerHTML=N,K=m(),L=c("tbody");for(let r=0;r<n.length;r+=1)n[r].c();this.h()},l(r){t=u(r,"DIV",{class:!0});var h=k(t);i=u(h,"H4",{class:!0,"data-svelte-h":!0}),ee(i)!=="svelte-1do8vtc"&&(i.textContent=f),E=v(h),C=u(h,"DIV",{class:!0});var o=k(C);_=u(o,"BUTTON",{class:!0,"data-svelte-h":!0}),ee(_)!=="svelte-cxj7cd"&&(_.textContent=g),P=v(o),z=u(o,"A",{href:!0,class:!0,"data-svelte-h":!0}),ee(z)!=="svelte-v73qn"&&(z.textContent=M),o.forEach(d),w=v(h),l=u(h,"H5",{"data-svelte-h":!0}),ee(l)!=="svelte-5geqh0"&&(l.textContent=O),D=v(h),p=u(h,"TABLE",{class:!0});var F=k(p);y=u(F,"THEAD",{"data-svelte-h":!0}),ee(y)!=="svelte-7bvx2k"&&(y.innerHTML=U),R=v(F),S=u(F,"TBODY",{});var te=k(S);for(let Z=0;Z<b.length;Z+=1)b[Z].l(te);te.forEach(d),F.forEach(d),$=v(h),G=u(h,"H5",{"data-svelte-h":!0}),ee(G)!=="svelte-1srfm57"&&(G.textContent=I),q=v(h),A=u(h,"TABLE",{class:!0});var W=k(A);Y=u(W,"THEAD",{"data-svelte-h":!0}),ee(Y)!=="svelte-7bvx2k"&&(Y.innerHTML=N),K=v(W),L=u(W,"TBODY",{});var ae=k(L);for(let Z=0;Z<n.length;Z+=1)n[Z].l(ae);ae.forEach(d),W.forEach(d),h.forEach(d),this.h()},h(){Q(i,"class","svelte-en0jke"),Q(_,"class","btn-small btn-primary"),Q(z,"href","uj-kurzus"),Q(z,"class","paper-btn btn-small btn-secondary"),Q(C,"class","toolbar"),Q(p,"class","table-hover"),Q(A,"class","table-hover"),Q(t,"class","container")},m(r,h){be(r,t,h),e(t,i),e(t,E),e(t,C),e(C,_),e(C,P),e(C,z),e(t,w),e(t,l),e(t,D),e(t,p),e(p,y),e(p,R),e(p,S);for(let o=0;o<b.length;o+=1)b[o]&&b[o].m(S,null);e(t,$),e(t,G),e(t,q),e(t,A),e(A,Y),e(A,K),e(A,L);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(L,null);X||(J=de(_,"click",s[1]),X=!0)},p(r,[h]){if(h&21){x=fe(r[0].taughtCourses);let o;for(o=0;o<x.length;o+=1){const F=ye(r,x,o);b[o]?b[o].p(F,h):(b[o]=Se(F),b[o].c(),b[o].m(S,null))}for(;o<b.length;o+=1)b[o].d(1);b.length=x.length}if(h&13){T=fe(r[0].courses);let o;for(o=0;o<T.length;o+=1){const F=De(r,T,o);n[o]?n[o].p(F,h):(n[o]=ze(F),n[o].c(),n[o].m(L,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=T.length}},i:ke,o:ke,d(r){r&&d(t),Ee(b,r),Ee(n,r),X=!1,J()}}}function $e(s,t,i){let{data:f}=t;const E=()=>Be(),C=async(l,O,D)=>{const p=pe.get("oktato-token"),y=D==="subscribe"?"POSt":"DELETE",U=D==="subscribe"?"feliratkozás":"leiratkozás",R=await fetch(`${_e}/api/course-teach?code=${l}&semester=${O}`,{method:y,headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(R.status===204)E(),le.push(`Sikeresen ${U} müvelet!`);else{const S=await R.json(),$=await ge.safeParseAsync(S);$.success?le.push($.data.errorMessage):le.push("Sikertelen törlés müvelet!")}},_=async(l,O)=>{const D=pe.get("oktato-token"),p=await fetch(`${_e}/api/courses?code=${l}&semester=${O}`,{method:"DELETE",headers:{Authorization:`Bearer ${D}`,"Content-Type":"application/json"}});if(p.status===204)E(),le.push("Sikeresen törlés müvelet!");else{const y=await p.json(),U=await ge.safeParseAsync(y);U.success?le.push(U.data.errorMessage):le.push("Sikertelen törlés müvelet!")}},g=async(l,O)=>{we("uj-vizsga?course="+l+"|"+O)},P=l=>g(l.courseCode,l.courseSemester),z=l=>C(l.courseCode,l.courseSemester,"unsubscribe"),M=l=>C(l.courseCode,l.courseSemester,"subscribe"),w=l=>_(l.courseCode,l.courseSemester);return s.$$set=l=>{"data"in l&&i(0,f=l.data)},[f,E,C,_,g,P,z,M,w]}class Je extends Ne{constructor(t){super(),je(this,t,$e,Oe,Ae,{data:0})}}export{Je as component,Ye as universal};
